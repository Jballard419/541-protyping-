<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VR Piano Project: Event Handlers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="piano-847409_1920.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VR Piano Project
   &#160;<span id="projectnumber">Prototype I</span>
   </div>
   <div id="projectbrief">Virtual-Reality Piano Project designed for EECS 541 &amp; 542 at the University of Kansas</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___v_i_m_handlers.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Event Handlers<div class="ingroups"><a class="el" href="group___audio.html">Audio</a> &raquo; <a class="el" href="group___audio_management.html">Audio Management</a> &raquo; <a class="el" href="group___v_i_m.html">Virtual Instrument Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8e79286073756c31e08fecd59ce04fa7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga8e79286073756c31e08fecd59ce04fa7">VirtualInstrumentManager.OnChangeInstrumentEvent</a> (<a class="el" href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">Music.INSTRUMENT_TYPE</a> aNewInstrumentType)</td></tr>
<tr class="memdesc:ga8e79286073756c31e08fecd59ce04fa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever an instrument should be loaded.  <a href="#ga8e79286073756c31e08fecd59ce04fa7">More...</a><br /></td></tr>
<tr class="separator:ga8e79286073756c31e08fecd59ce04fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga660c766dceebfc830de2cf96686692df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga660c766dceebfc830de2cf96686692df">VirtualInstrumentManager.OnChangeNoteRangeEvent</a> (<a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a> aNewLowestPitch)</td></tr>
<tr class="memdesc:ga660c766dceebfc830de2cf96686692df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever the range of active notes should be changed.  <a href="#ga660c766dceebfc830de2cf96686692df">More...</a><br /></td></tr>
<tr class="separator:ga660c766dceebfc830de2cf96686692df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac7d5b65484e450a400e32ab416ebc9f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#gac7d5b65484e450a400e32ab416ebc9f6">VirtualInstrumentManager.OnInstrumentLoaded</a> ()</td></tr>
<tr class="memdesc:gac7d5b65484e450a400e32ab416ebc9f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever the instrument has finished loading. It begins loading the NoteOutputObjects.  <a href="#gac7d5b65484e450a400e32ab416ebc9f6">More...</a><br /></td></tr>
<tr class="separator:gac7d5b65484e450a400e32ab416ebc9f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae504c6ded8eb68ffb117c207fc25d99d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#gae504c6ded8eb68ffb117c207fc25d99d">VirtualInstrumentManager.OnModifyEchoFilterEvent</a> (<a class="el" href="group__filter_params.html#struct_virtual_instrument_manager_1_1_echo_filter_parameters">EchoFilterParameters</a> aParameters)</td></tr>
<tr class="memdesc:gae504c6ded8eb68ffb117c207fc25d99d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever the echo filter should be modified.  <a href="#gae504c6ded8eb68ffb117c207fc25d99d">More...</a><br /></td></tr>
<tr class="separator:gae504c6ded8eb68ffb117c207fc25d99d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b310217971075b1b2db67d68fbbea5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga2b310217971075b1b2db67d68fbbea5a">VirtualInstrumentManager.OnModifyReverbFilterEvent</a> (<a class="el" href="group__filter_params.html#struct_virtual_instrument_manager_1_1_reverb_filter_parameters">ReverbFilterParameters</a> aParameters)</td></tr>
<tr class="memdesc:ga2b310217971075b1b2db67d68fbbea5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever the reverb filter should be modified.  <a href="#ga2b310217971075b1b2db67d68fbbea5a">More...</a><br /></td></tr>
<tr class="separator:ga2b310217971075b1b2db67d68fbbea5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30cd7f00fea55becd6d90f0ec737510a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga30cd7f00fea55becd6d90f0ec737510a">VirtualInstrumentManager.OnPauseDrumLoopEvent</a> ()</td></tr>
<tr class="memdesc:ga30cd7f00fea55becd6d90f0ec737510a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles pausing a drum loop.  <a href="#ga30cd7f00fea55becd6d90f0ec737510a">More...</a><br /></td></tr>
<tr class="separator:ga30cd7f00fea55becd6d90f0ec737510a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad052b3cc53b35b25631f9b399be489ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#gad052b3cc53b35b25631f9b399be489ae">VirtualInstrumentManager.OnPauseSongEvent</a> ()</td></tr>
<tr class="memdesc:gad052b3cc53b35b25631f9b399be489ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles pausing a song.  <a href="#gad052b3cc53b35b25631f9b399be489ae">More...</a><br /></td></tr>
<tr class="separator:gad052b3cc53b35b25631f9b399be489ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2e2010b9a36ae2409466181ae0b9679"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#gae2e2010b9a36ae2409466181ae0b9679">VirtualInstrumentManager.OnPlayDrumLoopEvent</a> (<a class="el" href="class_song.html">Song</a> aLoop)</td></tr>
<tr class="memdesc:gae2e2010b9a36ae2409466181ae0b9679"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begins playing a drum loop. It creates an array of audio data from each note of the <a class="el" href="class_song.html" title="A C# class that represents a song. ">Song</a> and sends it to the right <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a>.  <a href="#gae2e2010b9a36ae2409466181ae0b9679">More...</a><br /></td></tr>
<tr class="separator:gae2e2010b9a36ae2409466181ae0b9679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80b3821df3b1488a150f6062638f105c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga80b3821df3b1488a150f6062638f105c">VirtualInstrumentManager.OnPlayNoteEvent</a> (<a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a> aNoteToPlay, int aVelocity)</td></tr>
<tr class="memdesc:ga80b3821df3b1488a150f6062638f105c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever a note should be played. Uses the appropriate <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a> to play the note.  <a href="#ga80b3821df3b1488a150f6062638f105c">More...</a><br /></td></tr>
<tr class="separator:ga80b3821df3b1488a150f6062638f105c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7fd877a7d429403abbfd2728aa63c056"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga7fd877a7d429403abbfd2728aa63c056">VirtualInstrumentManager.OnPlaySongEvent</a> (<a class="el" href="class_song.html">Song</a> aSong)</td></tr>
<tr class="memdesc:ga7fd877a7d429403abbfd2728aa63c056"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begins playing a song. It creates an array of audio data from each note of the <a class="el" href="class_song.html" title="A C# class that represents a song. ">Song</a> and sends it to the right <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a>.  <a href="#ga7fd877a7d429403abbfd2728aa63c056">More...</a><br /></td></tr>
<tr class="separator:ga7fd877a7d429403abbfd2728aa63c056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f0a34c251d154131f9ea130a54dc989"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga0f0a34c251d154131f9ea130a54dc989">VirtualInstrumentManager.OnReleaseNoteEvent</a> (<a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a> aNoteToRelease)</td></tr>
<tr class="memdesc:ga0f0a34c251d154131f9ea130a54dc989"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever a note should be released. Uses the appropriate <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a> to release the note.  <a href="#ga0f0a34c251d154131f9ea130a54dc989">More...</a><br /></td></tr>
<tr class="separator:ga0f0a34c251d154131f9ea130a54dc989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97e3e73e05a7ab6027f25573712367a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga97e3e73e05a7ab6027f25573712367a2">VirtualInstrumentManager.OnResumeDrumLoopEvent</a> ()</td></tr>
<tr class="memdesc:ga97e3e73e05a7ab6027f25573712367a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles resuming a drum loop.  <a href="#ga97e3e73e05a7ab6027f25573712367a2">More...</a><br /></td></tr>
<tr class="separator:ga97e3e73e05a7ab6027f25573712367a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca3d2c89672fe0eb3d94b3cb2072de59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#gaca3d2c89672fe0eb3d94b3cb2072de59">VirtualInstrumentManager.OnResumeSongEvent</a> ()</td></tr>
<tr class="memdesc:gaca3d2c89672fe0eb3d94b3cb2072de59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles resuming a song.  <a href="#gaca3d2c89672fe0eb3d94b3cb2072de59">More...</a><br /></td></tr>
<tr class="separator:gaca3d2c89672fe0eb3d94b3cb2072de59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d251d8b2036a3416680ced5d6125d0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga9d251d8b2036a3416680ced5d6125d0e">VirtualInstrumentManager.OnStopDrumLoopEvent</a> ()</td></tr>
<tr class="memdesc:ga9d251d8b2036a3416680ced5d6125d0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles stopping a drum loop.  <a href="#ga9d251d8b2036a3416680ced5d6125d0e">More...</a><br /></td></tr>
<tr class="separator:ga9d251d8b2036a3416680ced5d6125d0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d9afb7a74107b5c6016555f0bb0a0a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_m_handlers.html#ga5d9afb7a74107b5c6016555f0bb0a0a8">VirtualInstrumentManager.OnStopSongEvent</a> ()</td></tr>
<tr class="memdesc:ga5d9afb7a74107b5c6016555f0bb0a0a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles stopping a song.  <a href="#ga5d9afb7a74107b5c6016555f0bb0a0a8">More...</a><br /></td></tr>
<tr class="separator:ga5d9afb7a74107b5c6016555f0bb0a0a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These are functions that the <a class="el" href="class_virtual_instrument_manager.html" title="The central hub for all audio management. ">VirtualInstrumentManager</a> uses to handle invoked <a class="el" href="group___v_i_m_events.html">events </a> </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8e79286073756c31e08fecd59ce04fa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e79286073756c31e08fecd59ce04fa7">&#9670;&nbsp;</a></span>OnChangeInstrumentEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnChangeInstrumentEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">Music.INSTRUMENT_TYPE</a>&#160;</td>
          <td class="paramname"><em>aNewInstrumentType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever an instrument should be loaded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aNewInstrumentType</td><td>The type of instrument that should be loaded</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3" title="The types of instruments that are currently supported. ">Music::INSTRUMENT_TYPE</a> <a class="el" href="group___v_i_m_event_types.html#class_virtual_instrument_manager_1_1_change_instrument_event" title="A type of event that is invoked whenever a new instrument should be loaded. ">VirtualInstrumentManager::ChangeInstrumentEvent</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00713">713</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00037">VirtualInstrumentManager.DEFAULT_LOWEST_PITCH</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00675">VirtualInstrumentManager.LoadInstrument()</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00325">VirtualInstrumentManager.mActiveNotes</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00324">VirtualInstrumentManager.mHighestActiveNote</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00322">VirtualInstrumentManager.mInstrumentType</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00323">VirtualInstrumentManager.mLowestActiveNote</a>, and <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00321">VirtualInstrumentManager.mNumActiveNotes</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="comment">// Mark that we&#39;re not ready for note events.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga983a11920bf16794735cc193c327ac42">mReady</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a> = null;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="comment">// Set the instrument type.</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">mInstrumentType</a> = aNewInstrumentType;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="comment">// Handle the difference in active notes for a drum kit vs. a normal instrument.</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">mInstrumentType</a> == <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">INSTRUMENT_TYPE</a>.DRUM_KIT )</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">mNumActiveNotes</a> = 18;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">mNumActiveNotes</a> = 24;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="comment">// Destroy the note output objects.</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>.Length; i++ )</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            DestroyImmediate( <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[i], <span class="keyword">false</span> );</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a> = null;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="comment">// Set default values for the active notes and be sure to account for drums</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">mInstrumentType</a> == <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">INSTRUMENT_TYPE</a>.DRUM_KIT )</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a> = <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>.C0;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a> = <a class="code" href="group___v_i_m_const.html#ga0ae09555ae6bc8a04110599510a0d77d">DEFAULT_LOWEST_PITCH</a>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga73a09a4e4f09c0e5b3871dc9ad6c757e">mHighestActiveNote</a> = (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)( (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a> + <a class="code" href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">mNumActiveNotes</a> - 1 );</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga5cedf9995d59b416412677e6004b659c">mActiveNotes</a> = <span class="keyword">new</span> <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>[<a class="code" href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">mNumActiveNotes</a>];</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">mNumActiveNotes</a>; i++ )</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga5cedf9995d59b416412677e6004b659c">mActiveNotes</a>[i] = (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)( i + (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a> );</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="comment">// Start a coroutine to load the instrument.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        StartCoroutine( <a class="code" href="group___v_i_m_coroutines.html#gab8082c1cc590771bf57da8b5ae8603d1">LoadInstrument</a>( <a class="code" href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">mInstrumentType</a>, ( returned ) =&gt; { <a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a> = returned; } ) );</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div><div class="ttc" id="group___v_i_m_priv_html_ga5cedf9995d59b416412677e6004b659c"><div class="ttname"><a href="group___v_i_m_priv.html#ga5cedf9995d59b416412677e6004b659c">VirtualInstrumentManager.mActiveNotes</a></div><div class="ttdeci">Music.PITCH [] mActiveNotes</div><div class="ttdoc">An array that holds all of the currently active notes. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00325">VirtualInstrumentManager.cs:325</a></div></div>
<div class="ttc" id="group___v_i_m_coroutines_html_gab8082c1cc590771bf57da8b5ae8603d1"><div class="ttname"><a href="group___v_i_m_coroutines.html#gab8082c1cc590771bf57da8b5ae8603d1">VirtualInstrumentManager.LoadInstrument</a></div><div class="ttdeci">IEnumerator LoadInstrument(Music.INSTRUMENT_TYPE aINSTRUMENT_TYPE, System.Action&lt; VirtualInstrument &gt; aInstrumentCallback)</div><div class="ttdoc">Coroutine to load an instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00675">VirtualInstrumentManager.cs:675</a></div></div>
<div class="ttc" id="group___v_i_m_const_html_ga0ae09555ae6bc8a04110599510a0d77d"><div class="ttname"><a href="group___v_i_m_const.html#ga0ae09555ae6bc8a04110599510a0d77d">VirtualInstrumentManager.DEFAULT_LOWEST_PITCH</a></div><div class="ttdeci">const Music.PITCH DEFAULT_LOWEST_PITCH</div><div class="ttdoc">The default lowest loaded pitch. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00037">VirtualInstrumentManager.cs:37</a></div></div>
<div class="ttc" id="group___music_enums_html_ga508f69b199ea518f935486c990edac1d"><div class="ttname"><a href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a></div><div class="ttdeci">PITCH</div><div class="ttdoc">The possible pitches that can be played. The range is from C0 to B9 with an extra entry for a rest no...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00124">Music.cs:124</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga73a09a4e4f09c0e5b3871dc9ad6c757e"><div class="ttname"><a href="group___v_i_m_priv.html#ga73a09a4e4f09c0e5b3871dc9ad6c757e">VirtualInstrumentManager.mHighestActiveNote</a></div><div class="ttdeci">Music.PITCH mHighestActiveNote</div><div class="ttdoc">The highest currently active note. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00324">VirtualInstrumentManager.cs:324</a></div></div>
<div class="ttc" id="group___music_enums_html_gabfce60192305965558a36e368ebd67c3"><div class="ttname"><a href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">Music.INSTRUMENT_TYPE</a></div><div class="ttdeci">INSTRUMENT_TYPE</div><div class="ttdoc">The types of instruments that are currently supported. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00085">Music.cs:85</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga5e3a5116e0dabb37e0ea21d73ac1567e"><div class="ttname"><a href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">VirtualInstrumentManager.mLowestActiveNote</a></div><div class="ttdeci">Music.PITCH mLowestActiveNote</div><div class="ttdoc">The lowest currently active note. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00323">VirtualInstrumentManager.cs:323</a></div></div>
<div class="ttc" id="class_music_html"><div class="ttname"><a href="class_music.html">Music</a></div><div class="ttdoc">A container for everything related to music such as pitches and note lengths. This class does not nee...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00018">Music.cs:18</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga983a11920bf16794735cc193c327ac42"><div class="ttname"><a href="group___v_i_m_priv.html#ga983a11920bf16794735cc193c327ac42">VirtualInstrumentManager.mReady</a></div><div class="ttdeci">bool mReady</div><div class="ttdoc">Whether or not the manager is ready to play notes. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00320">VirtualInstrumentManager.cs:320</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga0f7e11945763c48057be326b661dfdaf"><div class="ttname"><a href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">VirtualInstrumentManager.mNumActiveNotes</a></div><div class="ttdeci">int mNumActiveNotes</div><div class="ttdoc">The number of currently active notes. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00321">VirtualInstrumentManager.cs:321</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga108c350257b3a2080e06cd4a8251f6a4"><div class="ttname"><a href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">VirtualInstrumentManager.mInstrumentType</a></div><div class="ttdeci">Music.INSTRUMENT_TYPE mInstrumentType</div><div class="ttdoc">The type of instrument that is currently loaded. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00322">VirtualInstrumentManager.cs:322</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga53f837fd01475fa35629a650e7fa00e3"><div class="ttname"><a href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">VirtualInstrumentManager.mOutputs</a></div><div class="ttdeci">NoteOutputObject [] mOutputs</div><div class="ttdoc">An array that holds the NoteOutputObjects that actually handle sound output. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00331">VirtualInstrumentManager.cs:331</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaed435d1f9be09864846db4322dc21fd1"><div class="ttname"><a href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">VirtualInstrumentManager.mInstrument</a></div><div class="ttdeci">VirtualInstrument mInstrument</div><div class="ttdoc">The loaded virtual instrument that this object will manage. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00333">VirtualInstrumentManager.cs:333</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga660c766dceebfc830de2cf96686692df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga660c766dceebfc830de2cf96686692df">&#9670;&nbsp;</a></span>OnChangeNoteRangeEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnChangeNoteRangeEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a>&#160;</td>
          <td class="paramname"><em>aNewLowestPitch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever the range of active notes should be changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aNewLowestPitch</td><td>The lowest pitch in the new range.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d" title="The possible pitches that can be played. The range is from C0 to B9 with an extra entry for a rest no...">Music::PITCH</a> <a class="el" href="group___v_i_m_event_types.html#class_virtual_instrument_manager_1_1_change_note_range_event" title="A type of event that is invoked whenever the range of playable pitches should change. ">VirtualInstrumentManager::ChangeNoteRangeEvent</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00766">766</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_virtual_instrument_8cs_source.html#l00286">VirtualInstrument.IsPitchSupported()</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00521">VirtualInstrumentManager.LoadNoteOutputObjects()</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00325">VirtualInstrumentManager.mActiveNotes</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00324">VirtualInstrumentManager.mHighestActiveNote</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00323">VirtualInstrumentManager.mLowestActiveNote</a>, and <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00321">VirtualInstrumentManager.mNumActiveNotes</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="group___v_i_m_priv.html#ga983a11920bf16794735cc193c327ac42">mReady</a> )</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga983a11920bf16794735cc193c327ac42">mReady</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="comment">// Make sure that we can change to the note range given.</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="keywordtype">int</span> newHighestIndex = (int)aNewLowestPitch + <a class="code" href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">mNumActiveNotes</a> - 1;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a>.<a class="code" href="group___v_i_base_pub_func.html#ga89655451c108a7ad5cb96ab308e33937">IsPitchSupported</a>( aNewLowestPitch ) || !<a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a>.<a class="code" href="group___v_i_base_pub_func.html#ga89655451c108a7ad5cb96ab308e33937">IsPitchSupported</a>( (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)newHighestIndex ) )</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                Assert.IsTrue( <span class="keyword">false</span>, <span class="stringliteral">&quot;Tried to change the note range to include notes that aren&#39;t supported by the instrument!&quot;</span> );</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="comment">// Set the active note variables accordingly.</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a> = aNewLowestPitch;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga73a09a4e4f09c0e5b3871dc9ad6c757e">mHighestActiveNote</a> = (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)( (<span class="keywordtype">int</span>)aNewLowestPitch + <a class="code" href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">mNumActiveNotes</a> - 1 );</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">mNumActiveNotes</a>; i++ )</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                <a class="code" href="group___v_i_m_priv.html#ga5cedf9995d59b416412677e6004b659c">mActiveNotes</a>[i] = (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)( (<span class="keywordtype">int</span>)aNewLowestPitch + i );</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="comment">// Load the note output objects.</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <a class="code" href="group___v_i_m_priv_func.html#ga8817e32cc5074737b4d9489922b0fcb8">LoadNoteOutputObjects</a>();</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div><div class="ttc" id="group___v_i_m_priv_html_ga5cedf9995d59b416412677e6004b659c"><div class="ttname"><a href="group___v_i_m_priv.html#ga5cedf9995d59b416412677e6004b659c">VirtualInstrumentManager.mActiveNotes</a></div><div class="ttdeci">Music.PITCH [] mActiveNotes</div><div class="ttdoc">An array that holds all of the currently active notes. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00325">VirtualInstrumentManager.cs:325</a></div></div>
<div class="ttc" id="group___music_enums_html_ga508f69b199ea518f935486c990edac1d"><div class="ttname"><a href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a></div><div class="ttdeci">PITCH</div><div class="ttdoc">The possible pitches that can be played. The range is from C0 to B9 with an extra entry for a rest no...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00124">Music.cs:124</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga73a09a4e4f09c0e5b3871dc9ad6c757e"><div class="ttname"><a href="group___v_i_m_priv.html#ga73a09a4e4f09c0e5b3871dc9ad6c757e">VirtualInstrumentManager.mHighestActiveNote</a></div><div class="ttdeci">Music.PITCH mHighestActiveNote</div><div class="ttdoc">The highest currently active note. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00324">VirtualInstrumentManager.cs:324</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga5e3a5116e0dabb37e0ea21d73ac1567e"><div class="ttname"><a href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">VirtualInstrumentManager.mLowestActiveNote</a></div><div class="ttdeci">Music.PITCH mLowestActiveNote</div><div class="ttdoc">The lowest currently active note. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00323">VirtualInstrumentManager.cs:323</a></div></div>
<div class="ttc" id="class_music_html"><div class="ttname"><a href="class_music.html">Music</a></div><div class="ttdoc">A container for everything related to music such as pitches and note lengths. This class does not nee...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00018">Music.cs:18</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga983a11920bf16794735cc193c327ac42"><div class="ttname"><a href="group___v_i_m_priv.html#ga983a11920bf16794735cc193c327ac42">VirtualInstrumentManager.mReady</a></div><div class="ttdeci">bool mReady</div><div class="ttdoc">Whether or not the manager is ready to play notes. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00320">VirtualInstrumentManager.cs:320</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_ga89655451c108a7ad5cb96ab308e33937"><div class="ttname"><a href="group___v_i_base_pub_func.html#ga89655451c108a7ad5cb96ab308e33937">VirtualInstrument.IsPitchSupported</a></div><div class="ttdeci">bool IsPitchSupported(Music.PITCH aPitch)</div><div class="ttdoc">Gets whether or not the instrument can play a specific pitch. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00286">VirtualInstrument.cs:286</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga0f7e11945763c48057be326b661dfdaf"><div class="ttname"><a href="group___v_i_m_priv.html#ga0f7e11945763c48057be326b661dfdaf">VirtualInstrumentManager.mNumActiveNotes</a></div><div class="ttdeci">int mNumActiveNotes</div><div class="ttdoc">The number of currently active notes. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00321">VirtualInstrumentManager.cs:321</a></div></div>
<div class="ttc" id="group___v_i_m_priv_func_html_ga8817e32cc5074737b4d9489922b0fcb8"><div class="ttname"><a href="group___v_i_m_priv_func.html#ga8817e32cc5074737b4d9489922b0fcb8">VirtualInstrumentManager.LoadNoteOutputObjects</a></div><div class="ttdeci">void LoadNoteOutputObjects()</div><div class="ttdoc">Loads each NoteOutputObject that is used to output the audio. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00521">VirtualInstrumentManager.cs:521</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaed435d1f9be09864846db4322dc21fd1"><div class="ttname"><a href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">VirtualInstrumentManager.mInstrument</a></div><div class="ttdeci">VirtualInstrument mInstrument</div><div class="ttdoc">The loaded virtual instrument that this object will manage. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00333">VirtualInstrumentManager.cs:333</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac7d5b65484e450a400e32ab416ebc9f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac7d5b65484e450a400e32ab416ebc9f6">&#9670;&nbsp;</a></span>OnInstrumentLoaded()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnInstrumentLoaded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever the instrument has finished loading. It begins loading the NoteOutputObjects. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___v_i_m_event_types.html#class_virtual_instrument_manager_1_1_instrument_loaded_event" title="A type of event that is invoked in order to signal that the instrument has loaded. ">VirtualInstrumentManager::InstrumentLoadedEvent</a> <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00799">799</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00521">VirtualInstrumentManager.LoadNoteOutputObjects()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        Assert.IsNotNull( <a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a>, <span class="stringliteral">&quot;OnInstrumentLoaded was called, but the instrument was not loaded.&quot;</span> );</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <a class="code" href="group___v_i_m_priv_func.html#ga8817e32cc5074737b4d9489922b0fcb8">LoadNoteOutputObjects</a>();</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div><div class="ttc" id="group___v_i_m_priv_func_html_ga8817e32cc5074737b4d9489922b0fcb8"><div class="ttname"><a href="group___v_i_m_priv_func.html#ga8817e32cc5074737b4d9489922b0fcb8">VirtualInstrumentManager.LoadNoteOutputObjects</a></div><div class="ttdeci">void LoadNoteOutputObjects()</div><div class="ttdoc">Loads each NoteOutputObject that is used to output the audio. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00521">VirtualInstrumentManager.cs:521</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaed435d1f9be09864846db4322dc21fd1"><div class="ttname"><a href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">VirtualInstrumentManager.mInstrument</a></div><div class="ttdeci">VirtualInstrument mInstrument</div><div class="ttdoc">The loaded virtual instrument that this object will manage. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00333">VirtualInstrumentManager.cs:333</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae504c6ded8eb68ffb117c207fc25d99d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae504c6ded8eb68ffb117c207fc25d99d">&#9670;&nbsp;</a></span>OnModifyEchoFilterEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnModifyEchoFilterEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__filter_params.html#struct_virtual_instrument_manager_1_1_echo_filter_parameters">EchoFilterParameters</a>&#160;</td>
          <td class="paramname"><em>aParameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever the echo filter should be modified. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aParameters</td><td>The new parameters of the echo filter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___v_i_m_event_types.html#class_virtual_instrument_manager_1_1_modify_echo_filter_event" title="A type of event that is invoked in order to modify the echo filter. ">VirtualInstrumentManager::ModifyEchoFilterEvent</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00812">812</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00240">VirtualInstrumentManager.EchoFilterParameters.Active</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00241">VirtualInstrumentManager.EchoFilterParameters.Decay</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00242">VirtualInstrumentManager.EchoFilterParameters.Delay</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00243">VirtualInstrumentManager.EchoFilterParameters.DryMix</a>, and <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00244">VirtualInstrumentManager.EchoFilterParameters.WetMix</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="comment">// If the filter is active and the parameters are valid, then use the new parameters.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">if</span>( aParameters.Active )</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;echoDelay&quot;</span>, aParameters.Delay );</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;echoDecay&quot;</span>, aParameters.Decay );</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;echoDryMix&quot;</span>, aParameters.DryMix );</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;echoWetMix&quot;</span>, aParameters.WetMix );</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="comment">// If the filter is not active, then set values that negate the filter.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;echoDelay&quot;</span>, 1f );</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;echoDecay&quot;</span>, 0f );</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;echoDryMix&quot;</span>, 100f );</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;echoWetMix&quot;</span>, 0f );</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        }</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    }</div><div class="ttc" id="group___v_i_m_priv_html_ga08c8db1bb89f4ab1e28451dd93d6b99c"><div class="ttname"><a href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">VirtualInstrumentManager.mMixer</a></div><div class="ttdeci">AudioMixer mMixer</div><div class="ttdoc">The audio mixer that all audio output will be routed through. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00319">VirtualInstrumentManager.cs:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2b310217971075b1b2db67d68fbbea5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b310217971075b1b2db67d68fbbea5a">&#9670;&nbsp;</a></span>OnModifyReverbFilterEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnModifyReverbFilterEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__filter_params.html#struct_virtual_instrument_manager_1_1_reverb_filter_parameters">ReverbFilterParameters</a>&#160;</td>
          <td class="paramname"><em>aParameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever the reverb filter should be modified. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aParameters</td><td>The new parameters of the reverb filter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___v_i_m_event_types.html#class_virtual_instrument_manager_1_1_modify_reverb_filter_event" title="A type of event that is invoked in order to modify the reverb filter. ">VirtualInstrumentManager::ModifyReverbFilterEvent</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00838">838</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00256">VirtualInstrumentManager.ReverbFilterParameters.Active</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00261">VirtualInstrumentManager.ReverbFilterParameters.DecayHFRatio</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00260">VirtualInstrumentManager.ReverbFilterParameters.DecayTime</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00267">VirtualInstrumentManager.ReverbFilterParameters.Density</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00266">VirtualInstrumentManager.ReverbFilterParameters.Diffusion</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00257">VirtualInstrumentManager.ReverbFilterParameters.DryLevel</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00268">VirtualInstrumentManager.ReverbFilterParameters.HFReference</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00270">VirtualInstrumentManager.ReverbFilterParameters.LFReference</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00263">VirtualInstrumentManager.ReverbFilterParameters.ReflectDelay</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00262">VirtualInstrumentManager.ReverbFilterParameters.Reflections</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00264">VirtualInstrumentManager.ReverbFilterParameters.Reverb</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00265">VirtualInstrumentManager.ReverbFilterParameters.ReverbDelay</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00258">VirtualInstrumentManager.ReverbFilterParameters.Room</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00259">VirtualInstrumentManager.ReverbFilterParameters.RoomHF</a>, and <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00269">VirtualInstrumentManager.ReverbFilterParameters.RoomLF</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">if</span>( aParameters.Active )</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDryLevel&quot;</span>, aParameters.DryLevel );</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revRoom&quot;</span>, aParameters.Room );</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revRoomHF&quot;</span>, aParameters.RoomHF );</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDecayTime&quot;</span>, aParameters.DecayTime );</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDecayHFRatio&quot;</span>, aParameters.DecayHFRatio );</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revReflections&quot;</span>, aParameters.Reflections );</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revReflectDelay&quot;</span>, aParameters.ReflectDelay );</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revReverb&quot;</span>, aParameters.Reverb );</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revReverbDelay&quot;</span>, aParameters.ReverbDelay );</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDiffusion&quot;</span>, aParameters.Diffusion );</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDensity&quot;</span>, aParameters.Density );</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revHFReference&quot;</span>, aParameters.HFReference );</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revRoomLF&quot;</span>, aParameters.RoomLF );</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revLFReference&quot;</span>, aParameters.LFReference );</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDryLevel&quot;</span>, 0f );</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revRoom&quot;</span>, -10000f );</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revRoomHF&quot;</span>, -10000f );</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDecayTime&quot;</span>, 0.1f );</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDecayHFRatio&quot;</span>, 0.1f );</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revReflections&quot;</span>, -10000f );</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revReflectDelay&quot;</span>, -10000f );</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revReverb&quot;</span>, -10000f );</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revReverbDelay&quot;</span>, 0f );</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDiffusion&quot;</span>, 0f );</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revDensity&quot;</span>, 0f );</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revHFReference&quot;</span>, 20f );</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revRoomLF&quot;</span>, -10000f );</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>.SetFloat( <span class="stringliteral">&quot;revLFReference&quot;</span>, 20f );</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div><div class="ttc" id="group___v_i_m_priv_html_ga08c8db1bb89f4ab1e28451dd93d6b99c"><div class="ttname"><a href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">VirtualInstrumentManager.mMixer</a></div><div class="ttdeci">AudioMixer mMixer</div><div class="ttdoc">The audio mixer that all audio output will be routed through. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00319">VirtualInstrumentManager.cs:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga30cd7f00fea55becd6d90f0ec737510a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30cd7f00fea55becd6d90f0ec737510a">&#9670;&nbsp;</a></span>OnPauseDrumLoopEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnPauseDrumLoopEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles pausing a drum loop. </p>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00879">879</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00160">NoteOutputObject.PauseAudio()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">mDrumLoopOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#ga7977bc941f355866c7e4c141a8f7b8bb">PauseAudio</a>();</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div><div class="ttc" id="group___n_o_o_pub_func_html_ga7977bc941f355866c7e4c141a8f7b8bb"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga7977bc941f355866c7e4c141a8f7b8bb">NoteOutputObject.PauseAudio</a></div><div class="ttdeci">void PauseAudio()</div><div class="ttdoc">Pauses the audio. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00160">NoteOutputObject.cs:160</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga5f71cb71d240042312dcc13b481b068d"><div class="ttname"><a href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">VirtualInstrumentManager.mDrumLoopOutput</a></div><div class="ttdeci">NoteOutputObject mDrumLoopOutput</div><div class="ttdoc">A NoteOutputObject, but the note is actually a drum loop. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00329">VirtualInstrumentManager.cs:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad052b3cc53b35b25631f9b399be489ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad052b3cc53b35b25631f9b399be489ae">&#9670;&nbsp;</a></span>OnPauseSongEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnPauseSongEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles pausing a song. </p>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00887">887</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00160">NoteOutputObject.PauseAudio()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">mSongOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#ga7977bc941f355866c7e4c141a8f7b8bb">PauseAudio</a>();</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    }</div><div class="ttc" id="group___n_o_o_pub_func_html_ga7977bc941f355866c7e4c141a8f7b8bb"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga7977bc941f355866c7e4c141a8f7b8bb">NoteOutputObject.PauseAudio</a></div><div class="ttdeci">void PauseAudio()</div><div class="ttdoc">Pauses the audio. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00160">NoteOutputObject.cs:160</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaa8d4f5642f5ac4dca4f4178b0052c78d"><div class="ttname"><a href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">VirtualInstrumentManager.mSongOutput</a></div><div class="ttdeci">NoteOutputObject mSongOutput</div><div class="ttdoc">A NoteOutputObject, but the note is actually a song. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00330">VirtualInstrumentManager.cs:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae2e2010b9a36ae2409466181ae0b9679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2e2010b9a36ae2409466181ae0b9679">&#9670;&nbsp;</a></span>OnPlayDrumLoopEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnPlayDrumLoopEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_song.html">Song</a>&#160;</td>
          <td class="paramname"><em>aLoop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begins playing a drum loop. It creates an array of audio data from each note of the <a class="el" href="class_song.html" title="A C# class that represents a song. ">Song</a> and sends it to the right <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aLoop</td><td>The drum loop to play.</td></tr>
  </table>
  </dd>
</dl>
<p>This function begins playing drum loops which are handled differently from other songs. Special handling of offsets and the number of waveform samples in the loop is required in order to make the loop as seamless as possible. </p>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00901">901</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00116">NoteOutputObject.BeingPlaying()</a>, <a class="el" href="_virtual_instrument_8cs_source.html#l00140">VirtualInstrument.GetAdjustedVelocityFactor()</a>, <a class="el" href="_virtual_instrument_8cs_source.html#l00209">VirtualInstrument.GetAudioDataForPitch()</a>, <a class="el" href="_virtual_instrument_8cs_source.html#l00098">VirtualInstrument.GetBuiltInDynamicsThresholdIndex()</a>, <a class="el" href="_song_8cs_source.html#l00253">Song.GetNoteData()</a>, <a class="el" href="_note_output_object_8cs_source.html#l00182">NoteOutputObject.SetAudioData()</a>, <a class="el" href="_note_output_object_8cs_source.html#l00251">NoteOutputObject.SetLoop()</a>, and <a class="el" href="_song_8cs_source.html#l00084">Song.CombinedNoteData.TotalOffset</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="comment">// Get the song&#39;s note data.</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <a class="code" href="class_song.html">Song</a>.<a class="code" href="group___song_structs.html#struct_song_1_1_combined_note_data">CombinedNoteData</a>[] loopNoteData = aLoop.<a class="code" href="group___song_pub_func.html#gae3df1fd5448b7d9cefb0fed4af967985">GetNoteData</a>();</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="comment">// Get the number of notes in the loop.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordtype">int</span> numNotes = loopNoteData.Length;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="comment">// Get the number of waveform samples in the loop.</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordtype">int</span> numSamples = loopNoteData[numNotes - 1].<a class="code" href="group___song_structs.html#a9a0f4830f464d3c7e7f4f156ce490cec">TotalOffset</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="comment">// Get the start index for the loop.</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordtype">int</span> startIndex = loopNoteData[0].TotalOffset;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="comment">// Allocate a 2-D array for the song&#39;s audio data.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordtype">float</span>[][] loopAudioData = <span class="keyword">new</span> <span class="keywordtype">float</span>[1][];</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        loopAudioData[0] = <span class="keyword">new</span> <span class="keywordtype">float</span>[numSamples];</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="comment">// Make some variables to keep track of the velocity and offset.</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordtype">int</span> offset = 0;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordtype">int</span> velocity = 0;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordtype">int</span> velIndex = 0;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordtype">float</span> velFactor = 0f;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="comment">// Iterate through all of the notes.</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; numNotes; i++ )</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="comment">// In order to loop, the offset for the last note is set to 0.</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="keywordflow">if</span>( i == numNotes - 1 )</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                offset = 0;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                offset = loopNoteData[i].TotalOffset;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            </div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <span class="comment">// Get the velocity from the note.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            velocity = loopNoteData[i].PercussionData.Velocity;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="comment">// Get the associated dynamics index and velocity factor.</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            velIndex = <a class="code" href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">mDrumKit</a>.<a class="code" href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">GetBuiltInDynamicsThresholdIndex</a>( velocity );</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            velFactor = <a class="code" href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">mDrumKit</a>.<a class="code" href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">GetAdjustedVelocityFactor</a>( velocity );</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="comment">// Add the audio data for all of the drums in the note.</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; loopNoteData[i].PercussionData.Hits.Length; j++ )</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                <span class="comment">// Get the audio data for the note.</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                <span class="keywordtype">float</span>[][] drumAudioData = <a class="code" href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">mDrumKit</a>.<a class="code" href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">GetAudioDataForPitch</a>( (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)( loopNoteData[i].PercussionData.Hits[j] ) );</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                <span class="comment">// Put all of the samples from the drum&#39;s audio data into the song audio data.</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                <span class="keywordtype">int</span> audioDataIndex = 0;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                <span class="keywordtype">int</span> loopDataIndex = offset;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                <span class="comment">// Account for silencing hi-hats if needed.</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                <span class="keywordtype">int</span> numSamplesUntilNextHiHat = numSamples;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                <span class="keywordflow">if</span>( loopNoteData[i].PercussionData.Hits[j] == <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_O )</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                    <span class="keywordtype">int</span> nextHiHatIndex = i+1;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                    <span class="keywordtype">bool</span> nextHiHatFound = <span class="keyword">false</span>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                    <span class="comment">// Get the next hi hat hit by iterating through the notes.</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                    <span class="keywordflow">while</span>( nextHiHatIndex != i &amp;&amp; !nextHiHatFound )</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                    {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                        <span class="comment">// Make sure we don&#39;t have any index out of bounds errors.</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                        <span class="keywordflow">if</span>( nextHiHatIndex == numNotes )</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                        {</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                            nextHiHatIndex = 0;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                        }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                        <span class="comment">// See if this note has hi-hat hits. Break the loop if so.</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        <span class="keywordflow">if</span>( loopNoteData[nextHiHatIndex].PercussionData.HasHiHat )</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                        {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                            nextHiHatFound = <span class="keyword">true</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                            numSamplesUntilNextHiHat = loopNoteData[nextHiHatIndex].TotalOffset - loopNoteData[i].TotalOffset;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                            <span class="keywordflow">if</span>( numSamplesUntilNextHiHat &lt; 0 )</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                            {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                numSamplesUntilNextHiHat = ( -1 * numSamplesUntilNextHiHat ) + ( numSamples - loopNoteData[i].TotalOffset );</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                            }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                        }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                        {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                            <span class="comment">// Go to the next note if this note doesn&#39;t have any hi-hat hits.</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                            nextHiHatIndex++;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                        }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                    }</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                <span class="comment">// Put the audio data for the drum into the loop.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                <span class="keywordflow">while</span>( audioDataIndex &lt; drumAudioData[velIndex].Length &amp;&amp; numSamplesUntilNextHiHat &gt; 0 )</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                    loopAudioData[0][loopDataIndex] += ( drumAudioData[velIndex][audioDataIndex] * velFactor );</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    loopDataIndex++;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                    <span class="comment">// Account for bleeding over into the next loop.</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                    <span class="keywordflow">if</span>( loopDataIndex &gt;= numSamples )</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                        loopDataIndex = 0;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                    }</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                    audioDataIndex++;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                    numSamplesUntilNextHiHat--;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            }</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="comment">// Set the song output object&#39;s audio data and begin playing the song.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">mDrumLoopOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#gaef9ab691f0a2671a62249d853f24162d">SetAudioData</a>( loopAudioData, <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>, null );</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">mDrumLoopOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#ga7b79bbd2c7a68831b322edff140f29d2">SetLoop</a>( <span class="keyword">true</span> );</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">mDrumLoopOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( 1f, 0, startIndex );</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    }</div><div class="ttc" id="group___song_pub_func_html_gae3df1fd5448b7d9cefb0fed4af967985"><div class="ttname"><a href="group___song_pub_func.html#gae3df1fd5448b7d9cefb0fed4af967985">Song.GetNoteData</a></div><div class="ttdeci">CombinedNoteData [] GetNoteData()</div><div class="ttdoc">Converts the notes in the song to NoteData. </div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00253">Song.cs:253</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga0bc7c9f776b0d2dae0ccb1f1ee5f2143"><div class="ttname"><a href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">VirtualInstrumentManager.mDrumKit</a></div><div class="ttdeci">VirtualInstrument mDrumKit</div><div class="ttdoc">A drum kit virtual instrument for drum loops. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00332">VirtualInstrumentManager.cs:332</a></div></div>
<div class="ttc" id="group___music_enums_html_gade475b4382c7066d1af13e7c13c029b6"><div class="ttname"><a href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">Music.DRUM</a></div><div class="ttdeci">DRUM</div><div class="ttdoc">The possible drums/cymbals that can be played. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00058">Music.cs:58</a></div></div>
<div class="ttc" id="class_song_html"><div class="ttname"><a href="class_song.html">Song</a></div><div class="ttdoc">A C# class that represents a song. </div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00018">Song.cs:18</a></div></div>
<div class="ttc" id="group___music_enums_html_ga508f69b199ea518f935486c990edac1d"><div class="ttname"><a href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a></div><div class="ttdeci">PITCH</div><div class="ttdoc">The possible pitches that can be played. The range is from C0 to B9 with an extra entry for a rest no...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00124">Music.cs:124</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gaf715f7c3bbd2f1a2fa543b2f0684f8a6"><div class="ttname"><a href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">VirtualInstrument.GetAudioDataForPitch</a></div><div class="ttdeci">float [][] GetAudioDataForPitch(Music.PITCH aPitch)</div><div class="ttdoc">Gets the raw audio data of each built-in dynamics value for a given pitch. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00209">VirtualInstrument.cs:209</a></div></div>
<div class="ttc" id="class_music_html"><div class="ttname"><a href="class_music.html">Music</a></div><div class="ttdoc">A container for everything related to music such as pitches and note lengths. This class does not nee...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00018">Music.cs:18</a></div></div>
<div class="ttc" id="group___n_o_o_pub_func_html_ga7b79bbd2c7a68831b322edff140f29d2"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga7b79bbd2c7a68831b322edff140f29d2">NoteOutputObject.SetLoop</a></div><div class="ttdeci">void SetLoop(bool aLoop)</div><div class="ttdoc">Sets whether or not the audio should loop. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00251">NoteOutputObject.cs:251</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga08c8db1bb89f4ab1e28451dd93d6b99c"><div class="ttname"><a href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">VirtualInstrumentManager.mMixer</a></div><div class="ttdeci">AudioMixer mMixer</div><div class="ttdoc">The audio mixer that all audio output will be routed through. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00319">VirtualInstrumentManager.cs:319</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gae638c68bd0e79d0b99495be69e50f49d"><div class="ttname"><a href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">VirtualInstrument.GetAdjustedVelocityFactor</a></div><div class="ttdeci">float GetAdjustedVelocityFactor(int aVelocity)</div><div class="ttdoc">Gets the factor by which a note&amp;#39;s waveform is scaled in order to account for velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00140">VirtualInstrument.cs:140</a></div></div>
<div class="ttc" id="group___song_structs_html_struct_song_1_1_combined_note_data"><div class="ttname"><a href="group___song_structs.html#struct_song_1_1_combined_note_data">Song.CombinedNoteData</a></div><div class="ttdoc">A struct that contains data for both drums and the melody. </div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00082">Song.cs:82</a></div></div>
<div class="ttc" id="group___n_o_o_pub_func_html_gaef9ab691f0a2671a62249d853f24162d"><div class="ttname"><a href="group___n_o_o_pub_func.html#gaef9ab691f0a2671a62249d853f24162d">NoteOutputObject.SetAudioData</a></div><div class="ttdeci">void SetAudioData(float[][] aAudioData, AudioMixer aMixer, int[] aThresholds=null)</div><div class="ttdoc">Sets the audio data for this object. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00182">NoteOutputObject.cs:182</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga5f71cb71d240042312dcc13b481b068d"><div class="ttname"><a href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">VirtualInstrumentManager.mDrumLoopOutput</a></div><div class="ttdeci">NoteOutputObject mDrumLoopOutput</div><div class="ttdoc">A NoteOutputObject, but the note is actually a drum loop. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00329">VirtualInstrumentManager.cs:329</a></div></div>
<div class="ttc" id="group___n_o_o_pub_func_html_ga2bdaa2787408f353f71ef6c6a18e9285"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">NoteOutputObject.BeingPlaying</a></div><div class="ttdeci">void BeingPlaying(float aVelocityFactor, int aDynamicsIndex, int aStartIndex=0)</div><div class="ttdoc">Handler for setting the note to be played. Should be called from the manager&amp;#39;s PlayNote event...</div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00116">NoteOutputObject.cs:116</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gacddf07c08c3a8154a6934be22f539788"><div class="ttname"><a href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">VirtualInstrument.GetBuiltInDynamicsThresholdIndex</a></div><div class="ttdeci">int GetBuiltInDynamicsThresholdIndex(int aVelocity)</div><div class="ttdoc">Gets the index for which sound file to use for a pitch at a given velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00098">VirtualInstrument.cs:98</a></div></div>
<div class="ttc" id="group___song_structs_html_a9a0f4830f464d3c7e7f4f156ce490cec"><div class="ttname"><a href="group___song_structs.html#a9a0f4830f464d3c7e7f4f156ce490cec">Song.CombinedNoteData.TotalOffset</a></div><div class="ttdeci">int TotalOffset</div><div class="ttdoc">The number of waveform samples before the note should be played. Important: This offset is relative t...</div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00084">Song.cs:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga80b3821df3b1488a150f6062638f105c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80b3821df3b1488a150f6062638f105c">&#9670;&nbsp;</a></span>OnPlayNoteEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnPlayNoteEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a>&#160;</td>
          <td class="paramname"><em>aNoteToPlay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>aVelocity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever a note should be played. Uses the appropriate <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a> to play the note. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aNoteToPlay</td><td>The pitch of the note to play </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aVelocity</td><td>The velocity at which to play the pitch.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___v_i_m_event_types.html#class_virtual_instrument_manager_1_1_play_note_event" title="A type of event that is invoked whenever a note should be played. ">VirtualInstrumentManager::PlayNoteEvent</a> <a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d" title="The possible pitches that can be played. The range is from C0 to B9 with an extra entry for a rest no...">Music::PITCH</a> NoteOutputObject::BeginPlaying </dd></dl>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l01021">1021</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00116">NoteOutputObject.BeingPlaying()</a>, <a class="el" href="_virtual_instrument_8cs_source.html#l00140">VirtualInstrument.GetAdjustedVelocityFactor()</a>, <a class="el" href="_virtual_instrument_8cs_source.html#l00098">VirtualInstrument.GetBuiltInDynamicsThresholdIndex()</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00324">VirtualInstrumentManager.mHighestActiveNote</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00322">VirtualInstrumentManager.mInstrumentType</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00323">VirtualInstrumentManager.mLowestActiveNote</a>, and <a class="el" href="_music_8cs_source.html#l00480">Music.NoteToString()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="group___v_i_m_priv.html#ga983a11920bf16794735cc193c327ac42">mReady</a> )</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <span class="comment">// Sanity checks.</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            Assert.IsTrue( (<span class="keywordtype">int</span>)aNoteToPlay &gt;= (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a> &amp;&amp; (<span class="keywordtype">int</span>)aNoteToPlay &lt;= (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_m_priv.html#ga73a09a4e4f09c0e5b3871dc9ad6c757e">mHighestActiveNote</a>,</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                <span class="stringliteral">&quot;Tried to play the note &quot;</span> + <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">NoteToString</a>( aNoteToPlay ) + <span class="stringliteral">&quot; which is not active!&quot;</span> );</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            Assert.IsTrue( aVelocity &lt;= 100 &amp;&amp; aVelocity &gt;= 0,</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <span class="stringliteral">&quot;Tried to play a note with a velocity of &quot;</span> + aVelocity.ToString() + <span class="stringliteral">&quot; which is not within the range from 0 to 100!&quot;</span> );</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <span class="comment">// Get the note index.</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordtype">int</span> noteIndex = (int)aNoteToPlay - (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="comment">// Account for drum kits where we would need to make some outputs silent in some situations.</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="comment">// Ex: Playing a closed hi-hat should stop an open hi-hat that is still playing.</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">mInstrumentType</a> == <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">INSTRUMENT_TYPE</a>.DRUM_KIT )</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                <span class="keywordflow">switch</span>( (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>)aNoteToPlay )</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_C:</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                        <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[(int)<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_O].<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( 0, 0 );</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                        <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[(int)<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_P].<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( 0, 0 );</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_O:</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                        <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[(int)<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_C].<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( 0, 0 );</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                        <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[(int)<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_P].<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( 0, 0 );</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_P:</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                        <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[(int)<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_C].<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( 0, 0 );</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                        <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[(int)<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_O].<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( 0, 0 );</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="comment">// Get the built-in dynamics index and the velocity factor.</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <span class="keywordtype">int</span> velIndex = <a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a>.<a class="code" href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">GetBuiltInDynamicsThresholdIndex</a>( aVelocity );</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordtype">float</span> velFactor = <a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a>.<a class="code" href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">GetAdjustedVelocityFactor</a>( aVelocity );</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <span class="comment">// Begin playing the note.</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[noteIndex].<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( velFactor, velIndex, 0 );</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    }</div><div class="ttc" id="group___music_stat_func_html_ga85a22c905d56d4c5f4e62159bfecee8c"><div class="ttname"><a href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">Music.NoteToString</a></div><div class="ttdeci">static string NoteToString(PITCH aNoteValue)</div><div class="ttdoc">Gives a string representing a PITCH. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00480">Music.cs:480</a></div></div>
<div class="ttc" id="group___music_enums_html_gade475b4382c7066d1af13e7c13c029b6"><div class="ttname"><a href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">Music.DRUM</a></div><div class="ttdeci">DRUM</div><div class="ttdoc">The possible drums/cymbals that can be played. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00058">Music.cs:58</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga73a09a4e4f09c0e5b3871dc9ad6c757e"><div class="ttname"><a href="group___v_i_m_priv.html#ga73a09a4e4f09c0e5b3871dc9ad6c757e">VirtualInstrumentManager.mHighestActiveNote</a></div><div class="ttdeci">Music.PITCH mHighestActiveNote</div><div class="ttdoc">The highest currently active note. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00324">VirtualInstrumentManager.cs:324</a></div></div>
<div class="ttc" id="group___music_enums_html_gabfce60192305965558a36e368ebd67c3"><div class="ttname"><a href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">Music.INSTRUMENT_TYPE</a></div><div class="ttdeci">INSTRUMENT_TYPE</div><div class="ttdoc">The types of instruments that are currently supported. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00085">Music.cs:85</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga5e3a5116e0dabb37e0ea21d73ac1567e"><div class="ttname"><a href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">VirtualInstrumentManager.mLowestActiveNote</a></div><div class="ttdeci">Music.PITCH mLowestActiveNote</div><div class="ttdoc">The lowest currently active note. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00323">VirtualInstrumentManager.cs:323</a></div></div>
<div class="ttc" id="class_music_html"><div class="ttname"><a href="class_music.html">Music</a></div><div class="ttdoc">A container for everything related to music such as pitches and note lengths. This class does not nee...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00018">Music.cs:18</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga983a11920bf16794735cc193c327ac42"><div class="ttname"><a href="group___v_i_m_priv.html#ga983a11920bf16794735cc193c327ac42">VirtualInstrumentManager.mReady</a></div><div class="ttdeci">bool mReady</div><div class="ttdoc">Whether or not the manager is ready to play notes. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00320">VirtualInstrumentManager.cs:320</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga108c350257b3a2080e06cd4a8251f6a4"><div class="ttname"><a href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">VirtualInstrumentManager.mInstrumentType</a></div><div class="ttdeci">Music.INSTRUMENT_TYPE mInstrumentType</div><div class="ttdoc">The type of instrument that is currently loaded. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00322">VirtualInstrumentManager.cs:322</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gae638c68bd0e79d0b99495be69e50f49d"><div class="ttname"><a href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">VirtualInstrument.GetAdjustedVelocityFactor</a></div><div class="ttdeci">float GetAdjustedVelocityFactor(int aVelocity)</div><div class="ttdoc">Gets the factor by which a note&amp;#39;s waveform is scaled in order to account for velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00140">VirtualInstrument.cs:140</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga53f837fd01475fa35629a650e7fa00e3"><div class="ttname"><a href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">VirtualInstrumentManager.mOutputs</a></div><div class="ttdeci">NoteOutputObject [] mOutputs</div><div class="ttdoc">An array that holds the NoteOutputObjects that actually handle sound output. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00331">VirtualInstrumentManager.cs:331</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaed435d1f9be09864846db4322dc21fd1"><div class="ttname"><a href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">VirtualInstrumentManager.mInstrument</a></div><div class="ttdeci">VirtualInstrument mInstrument</div><div class="ttdoc">The loaded virtual instrument that this object will manage. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00333">VirtualInstrumentManager.cs:333</a></div></div>
<div class="ttc" id="group___n_o_o_pub_func_html_ga2bdaa2787408f353f71ef6c6a18e9285"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">NoteOutputObject.BeingPlaying</a></div><div class="ttdeci">void BeingPlaying(float aVelocityFactor, int aDynamicsIndex, int aStartIndex=0)</div><div class="ttdoc">Handler for setting the note to be played. Should be called from the manager&amp;#39;s PlayNote event...</div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00116">NoteOutputObject.cs:116</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gacddf07c08c3a8154a6934be22f539788"><div class="ttname"><a href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">VirtualInstrument.GetBuiltInDynamicsThresholdIndex</a></div><div class="ttdeci">int GetBuiltInDynamicsThresholdIndex(int aVelocity)</div><div class="ttdoc">Gets the index for which sound file to use for a pitch at a given velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00098">VirtualInstrument.cs:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7fd877a7d429403abbfd2728aa63c056"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7fd877a7d429403abbfd2728aa63c056">&#9670;&nbsp;</a></span>OnPlaySongEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnPlaySongEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_song.html">Song</a>&#160;</td>
          <td class="paramname"><em>aSong</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begins playing a song. It creates an array of audio data from each note of the <a class="el" href="class_song.html" title="A C# class that represents a song. ">Song</a> and sends it to the right <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aSong</td><td>The song to play. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l01071">1071</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00116">NoteOutputObject.BeingPlaying()</a>, <a class="el" href="_virtual_instrument_8cs_source.html#l00140">VirtualInstrument.GetAdjustedVelocityFactor()</a>, <a class="el" href="_virtual_instrument_8cs_source.html#l00209">VirtualInstrument.GetAudioDataForPitch()</a>, <a class="el" href="_virtual_instrument_8cs_source.html#l00098">VirtualInstrument.GetBuiltInDynamicsThresholdIndex()</a>, <a class="el" href="_song_8cs_source.html#l00253">Song.GetNoteData()</a>, <a class="el" href="_song_8cs_source.html#l00312">Song.GetSongType()</a>, <a class="el" href="_note_output_object_8cs_source.html#l00182">NoteOutputObject.SetAudioData()</a>, and <a class="el" href="_song_8cs_source.html#l00084">Song.CombinedNoteData.TotalOffset</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="comment">// Get the song&#39;s note data.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <a class="code" href="class_song.html">Song</a>.<a class="code" href="group___song_structs.html#struct_song_1_1_combined_note_data">CombinedNoteData</a>[] songNoteData = aSong.<a class="code" href="group___song_pub_func.html#gae3df1fd5448b7d9cefb0fed4af967985">GetNoteData</a>();</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">// Get the number of notes in the song.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordtype">int</span> numNotes = songNoteData.Length;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="comment">// Get the total number of samples in the song.</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordtype">int</span> numSamples = 0;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">if</span>( aSong.<a class="code" href="group___song_pub_func.html#gabae5b5d8f727b2d9da7867a99347f86b">GetSongType</a>() != <a class="code" href="class_song.html">Song</a>.<a class="code" href="group___song_enums.html#gae681a1f001333e39fc1cb4fea97bfe1b">SongType</a>.DrumLoop )</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; numNotes; i++ )</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                numSamples = Mathf.Max( ( songNoteData[i].MelodyData.NumSamples + songNoteData[i].TotalOffset ), numSamples );</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            numSamples = 0;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; songNoteData[numNotes - 1].PercussionData.Hits.Length; i++ )</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                <span class="keywordflow">if</span>( numSamples &lt; ( songNoteData[numNotes - 1].TotalOffset +</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                    <a class="code" href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">mDrumKit</a>.<a class="code" href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">GetAudioDataForPitch</a>( (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)( songNoteData[numNotes - 1].PercussionData.Hits[i] ) )[0].Length ) )</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                    numSamples = songNoteData[numNotes - 1].<a class="code" href="group___song_structs.html#a9a0f4830f464d3c7e7f4f156ce490cec">TotalOffset</a> +</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                        <a class="code" href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">mDrumKit</a>.<a class="code" href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">GetAudioDataForPitch</a>( (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)( songNoteData[numNotes - 1].PercussionData.Hits[i] ) )[0].Length;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            }</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="comment">// Allocate a 2-D array for the song&#39;s audio data.</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="keywordtype">float</span>[][] songAudioData = <span class="keyword">new</span> <span class="keywordtype">float</span>[1][];</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        songAudioData[0] = <span class="keyword">new</span> <span class="keywordtype">float</span>[numSamples];</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="comment">// Make some variables to keep track of the velocity and offset.</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="keywordtype">int</span> offset = 0;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordtype">int</span> velocity = 0;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="keywordtype">int</span> velIndex = 0;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordtype">float</span> velFactor = 0f;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="comment">// Iterate through all of the notes.</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; numNotes; i++ )</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            <span class="comment">// If the note is a rest, we don&#39;t need to worry its pitches. Otherwise, add the note&#39;s pitches.</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            <span class="keywordflow">if</span>( songNoteData[i].MelodyData.Pitches != null &amp;&amp; songNoteData[i].MelodyData.Pitches[0] != <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>.REST )</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                <span class="comment">// Get the offset and velocity from the note.</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                offset = songNoteData[i].TotalOffset;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                velocity = songNoteData[i].MelodyData.Velocity;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                <span class="comment">// Get the associated dynamics index and velocity factor.</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                velIndex = <a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a>.<a class="code" href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">GetBuiltInDynamicsThresholdIndex</a>( velocity );</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                velFactor = <a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a>.<a class="code" href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">GetAdjustedVelocityFactor</a>( velocity );</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                <span class="comment">// Add the audio data for all of the pitches in the note.</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; songNoteData[i].MelodyData.Pitches.Length; j++ )</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                {</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                    <span class="comment">// Get the audio data for the note.</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    <span class="keywordtype">float</span>[][] pitchAudioData = <a class="code" href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">mInstrument</a>.<a class="code" href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">GetAudioDataForPitch</a>( songNoteData[i].MelodyData.Pitches[j] );</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                    <span class="comment">// Put all of the samples from the pitch&#39;s audio data into the song audio data.</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                    <span class="keywordtype">int</span> k = 0;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                    <span class="keywordflow">while</span>( k &lt; songNoteData[i].MelodyData.NumSamples &amp;&amp; k &lt; pitchAudioData[velIndex].Length )</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                    {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                        songAudioData[0][k + offset] += ( pitchAudioData[velIndex][k] * velFactor );</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                        k++;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                    }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                    <span class="comment">// Adjust for when the note is released.</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                    <span class="keywordtype">float</span> releaseFactor = velFactor;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                    <span class="keywordflow">while</span>( k &lt; pitchAudioData[velIndex].Length &amp;&amp; k + offset &lt; numSamples &amp;&amp; releaseFactor &gt; 0 )</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                    {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                        songAudioData[0][k + offset] += pitchAudioData[velIndex][k] * releaseFactor;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                        releaseFactor -= ( 1f / 22500f );</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                        k++;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                    }</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                    <span class="comment">// Cleanup</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                    pitchAudioData = null;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            <span class="comment">// If the note has drums, then add them.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="keywordflow">if</span>( songNoteData[i].PercussionData.Hits != null )</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                <span class="comment">// Get the offset and velocity from the note.</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                offset = songNoteData[i].TotalOffset;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                velocity = songNoteData[i].PercussionData.Velocity;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                <span class="comment">// Get the associated dynamics index and velocity factor.</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                velIndex = <a class="code" href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">mDrumKit</a>.<a class="code" href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">GetBuiltInDynamicsThresholdIndex</a>( velocity );</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                velFactor = <a class="code" href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">mDrumKit</a>.<a class="code" href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">GetAdjustedVelocityFactor</a>( velocity );</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                <span class="comment">// Add the audio data for all of the drums in the note.</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; songNoteData[i].PercussionData.Hits.Length; j++ )</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    <span class="comment">// Get the audio data for the note.</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    <span class="keywordtype">float</span>[][] drumAudioData = <a class="code" href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">mDrumKit</a>.<a class="code" href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">GetAudioDataForPitch</a>( (<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>)( songNoteData[i].PercussionData.Hits[j] ) );</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                    <span class="comment">// Put all of the samples from the drum&#39;s audio data into the song audio data.</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    <span class="keywordtype">int</span> audioDataIndex = 0;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                    <span class="keywordtype">int</span> drumDataIndex = offset;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                    <span class="comment">// Account for silencing hi-hats if needed.</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                    <span class="keywordtype">int</span> numSamplesUntilNextHiHat = numSamples;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    <span class="keywordflow">if</span>( songNoteData[i].PercussionData.Hits[j] == <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">DRUM</a>.HIHAT_O )</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                    {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                        <span class="keywordtype">int</span> nextHiHatIndex = i+1;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                        <span class="keywordtype">bool</span> nextHiHatFound = <span class="keyword">false</span>;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                        <span class="comment">// Get the next hi hat hit by iterating through the notes.</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                        <span class="keywordflow">while</span>( nextHiHatIndex != i &amp;&amp; !nextHiHatFound )</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                        {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                            <span class="comment">// Make sure we don&#39;t have any index out of bounds errors.</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                            <span class="keywordflow">if</span>( nextHiHatIndex == numNotes )</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                            {</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                                nextHiHatIndex = 0;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                            }</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                            <span class="comment">// See if this note has hi-hat hits. Break the loop if so.</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                            <span class="keywordflow">if</span>( songNoteData[nextHiHatIndex].PercussionData.HasHiHat )</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                            {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                                nextHiHatFound = <span class="keyword">true</span>;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                                numSamplesUntilNextHiHat = songNoteData[nextHiHatIndex].TotalOffset - songNoteData[i].TotalOffset;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                                <span class="keywordflow">if</span>( numSamplesUntilNextHiHat &lt; 0 )</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                                {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                                    numSamplesUntilNextHiHat = ( -1 * numSamplesUntilNextHiHat ) + ( numSamples - songNoteData[i].TotalOffset );</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                                }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                            }</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                            <span class="keywordflow">else</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                            {</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                                <span class="comment">// Go to the next note if this note doesn&#39;t have any hi-hat hits.</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                                nextHiHatIndex++;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                            }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                        }</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                    }</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                    <span class="comment">// Put the audio data for the drum into the song.</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                    <span class="keywordflow">while</span>( audioDataIndex &lt; drumAudioData[velIndex].Length &amp;&amp; numSamplesUntilNextHiHat &gt; 0 &amp;&amp; drumDataIndex &lt; numSamples )</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                    {</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                        songAudioData[0][drumDataIndex] += ( drumAudioData[velIndex][audioDataIndex] * velFactor );</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                        drumDataIndex++;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                        audioDataIndex++;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                        numSamplesUntilNextHiHat--;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                    }</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                    <span class="comment">// Cleanup</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                    drumAudioData = null;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        }</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="comment">// Set the song output object&#39;s audio data and begin playing the song.</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <a class="code" href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">mSongOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#gaef9ab691f0a2671a62249d853f24162d">SetAudioData</a>( songAudioData, <a class="code" href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">mMixer</a>, null );</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">mSongOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">BeingPlaying</a>( 1f, 0 );</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="comment">// Cleanup</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        songAudioData = null;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        GC.Collect();</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    }</div><div class="ttc" id="group___song_pub_func_html_gae3df1fd5448b7d9cefb0fed4af967985"><div class="ttname"><a href="group___song_pub_func.html#gae3df1fd5448b7d9cefb0fed4af967985">Song.GetNoteData</a></div><div class="ttdeci">CombinedNoteData [] GetNoteData()</div><div class="ttdoc">Converts the notes in the song to NoteData. </div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00253">Song.cs:253</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga0bc7c9f776b0d2dae0ccb1f1ee5f2143"><div class="ttname"><a href="group___v_i_m_priv.html#ga0bc7c9f776b0d2dae0ccb1f1ee5f2143">VirtualInstrumentManager.mDrumKit</a></div><div class="ttdeci">VirtualInstrument mDrumKit</div><div class="ttdoc">A drum kit virtual instrument for drum loops. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00332">VirtualInstrumentManager.cs:332</a></div></div>
<div class="ttc" id="group___music_enums_html_gade475b4382c7066d1af13e7c13c029b6"><div class="ttname"><a href="group___music_enums.html#gade475b4382c7066d1af13e7c13c029b6">Music.DRUM</a></div><div class="ttdeci">DRUM</div><div class="ttdoc">The possible drums/cymbals that can be played. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00058">Music.cs:58</a></div></div>
<div class="ttc" id="class_song_html"><div class="ttname"><a href="class_song.html">Song</a></div><div class="ttdoc">A C# class that represents a song. </div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00018">Song.cs:18</a></div></div>
<div class="ttc" id="group___song_pub_func_html_gabae5b5d8f727b2d9da7867a99347f86b"><div class="ttname"><a href="group___song_pub_func.html#gabae5b5d8f727b2d9da7867a99347f86b">Song.GetSongType</a></div><div class="ttdeci">SongType GetSongType()</div><div class="ttdoc">Gets the type of song that the Song is. </div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00312">Song.cs:312</a></div></div>
<div class="ttc" id="group___music_enums_html_ga508f69b199ea518f935486c990edac1d"><div class="ttname"><a href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a></div><div class="ttdeci">PITCH</div><div class="ttdoc">The possible pitches that can be played. The range is from C0 to B9 with an extra entry for a rest no...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00124">Music.cs:124</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gaf715f7c3bbd2f1a2fa543b2f0684f8a6"><div class="ttname"><a href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">VirtualInstrument.GetAudioDataForPitch</a></div><div class="ttdeci">float [][] GetAudioDataForPitch(Music.PITCH aPitch)</div><div class="ttdoc">Gets the raw audio data of each built-in dynamics value for a given pitch. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00209">VirtualInstrument.cs:209</a></div></div>
<div class="ttc" id="class_music_html"><div class="ttname"><a href="class_music.html">Music</a></div><div class="ttdoc">A container for everything related to music such as pitches and note lengths. This class does not nee...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00018">Music.cs:18</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga08c8db1bb89f4ab1e28451dd93d6b99c"><div class="ttname"><a href="group___v_i_m_priv.html#ga08c8db1bb89f4ab1e28451dd93d6b99c">VirtualInstrumentManager.mMixer</a></div><div class="ttdeci">AudioMixer mMixer</div><div class="ttdoc">The audio mixer that all audio output will be routed through. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00319">VirtualInstrumentManager.cs:319</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gae638c68bd0e79d0b99495be69e50f49d"><div class="ttname"><a href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">VirtualInstrument.GetAdjustedVelocityFactor</a></div><div class="ttdeci">float GetAdjustedVelocityFactor(int aVelocity)</div><div class="ttdoc">Gets the factor by which a note&amp;#39;s waveform is scaled in order to account for velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00140">VirtualInstrument.cs:140</a></div></div>
<div class="ttc" id="group___song_structs_html_struct_song_1_1_combined_note_data"><div class="ttname"><a href="group___song_structs.html#struct_song_1_1_combined_note_data">Song.CombinedNoteData</a></div><div class="ttdoc">A struct that contains data for both drums and the melody. </div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00082">Song.cs:82</a></div></div>
<div class="ttc" id="group___n_o_o_pub_func_html_gaef9ab691f0a2671a62249d853f24162d"><div class="ttname"><a href="group___n_o_o_pub_func.html#gaef9ab691f0a2671a62249d853f24162d">NoteOutputObject.SetAudioData</a></div><div class="ttdeci">void SetAudioData(float[][] aAudioData, AudioMixer aMixer, int[] aThresholds=null)</div><div class="ttdoc">Sets the audio data for this object. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00182">NoteOutputObject.cs:182</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaed435d1f9be09864846db4322dc21fd1"><div class="ttname"><a href="group___v_i_m_priv.html#gaed435d1f9be09864846db4322dc21fd1">VirtualInstrumentManager.mInstrument</a></div><div class="ttdeci">VirtualInstrument mInstrument</div><div class="ttdoc">The loaded virtual instrument that this object will manage. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00333">VirtualInstrumentManager.cs:333</a></div></div>
<div class="ttc" id="group___n_o_o_pub_func_html_ga2bdaa2787408f353f71ef6c6a18e9285"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga2bdaa2787408f353f71ef6c6a18e9285">NoteOutputObject.BeingPlaying</a></div><div class="ttdeci">void BeingPlaying(float aVelocityFactor, int aDynamicsIndex, int aStartIndex=0)</div><div class="ttdoc">Handler for setting the note to be played. Should be called from the manager&amp;#39;s PlayNote event...</div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00116">NoteOutputObject.cs:116</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaa8d4f5642f5ac4dca4f4178b0052c78d"><div class="ttname"><a href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">VirtualInstrumentManager.mSongOutput</a></div><div class="ttdeci">NoteOutputObject mSongOutput</div><div class="ttdoc">A NoteOutputObject, but the note is actually a song. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00330">VirtualInstrumentManager.cs:330</a></div></div>
<div class="ttc" id="group___song_enums_html_gae681a1f001333e39fc1cb4fea97bfe1b"><div class="ttname"><a href="group___song_enums.html#gae681a1f001333e39fc1cb4fea97bfe1b">Song.SongType</a></div><div class="ttdeci">SongType</div><div class="ttdoc">The possible types of songs. </div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00040">Song.cs:40</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gacddf07c08c3a8154a6934be22f539788"><div class="ttname"><a href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">VirtualInstrument.GetBuiltInDynamicsThresholdIndex</a></div><div class="ttdeci">int GetBuiltInDynamicsThresholdIndex(int aVelocity)</div><div class="ttdoc">Gets the index for which sound file to use for a pitch at a given velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00098">VirtualInstrument.cs:98</a></div></div>
<div class="ttc" id="group___song_structs_html_a9a0f4830f464d3c7e7f4f156ce490cec"><div class="ttname"><a href="group___song_structs.html#a9a0f4830f464d3c7e7f4f156ce490cec">Song.CombinedNoteData.TotalOffset</a></div><div class="ttdeci">int TotalOffset</div><div class="ttdoc">The number of waveform samples before the note should be played. Important: This offset is relative t...</div><div class="ttdef"><b>Definition:</b> <a href="_song_8cs_source.html#l00084">Song.cs:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0f0a34c251d154131f9ea130a54dc989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f0a34c251d154131f9ea130a54dc989">&#9670;&nbsp;</a></span>OnReleaseNoteEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnReleaseNoteEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a>&#160;</td>
          <td class="paramname"><em>aNoteToRelease</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called whenever a note should be released. Uses the appropriate <a class="el" href="class_note_output_object.html" title="Unity GameObject that handles the actual output of sound. ">NoteOutputObject</a> to release the note. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aNoteToRelease</td><td>The pitch of the note to release</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___v_i_m_event_types.html#class_virtual_instrument_manager_1_1_play_note_event" title="A type of event that is invoked whenever a note should be played. ">VirtualInstrumentManager::PlayNoteEvent</a> <a class="el" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d" title="The possible pitches that can be played. The range is from C0 to B9 with an extra entry for a rest no...">Music::PITCH</a> <a class="el" href="group___n_o_o_pub_func.html#ga044e62759958d717c7fa4fd1615e2ec1" title="Marks that the audio should begin fading out. ">NoteOutputObject::BeginRelease</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l01243">1243</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00136">NoteOutputObject.BeginRelease()</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00324">VirtualInstrumentManager.mHighestActiveNote</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00322">VirtualInstrumentManager.mInstrumentType</a>, <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00323">VirtualInstrumentManager.mLowestActiveNote</a>, and <a class="el" href="_music_8cs_source.html#l00480">Music.NoteToString()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="comment">// Don&#39;t account for note releases for drums.</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">mInstrumentType</a> != <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">INSTRUMENT_TYPE</a>.DRUM_KIT )</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            Assert.IsTrue( (<span class="keywordtype">int</span>)aNoteToRelease &gt;= (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a> &amp;&amp; (<span class="keywordtype">int</span>)aNoteToRelease &lt;= (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_m_priv.html#ga73a09a4e4f09c0e5b3871dc9ad6c757e">mHighestActiveNote</a>,</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                <span class="stringliteral">&quot;Tried to fade out the note &quot;</span> + <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">NoteToString</a>( aNoteToRelease ) + <span class="stringliteral">&quot; which is not active!&quot;</span> );</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="keywordtype">int</span> noteIndex = (int)aNoteToRelease - (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">mLowestActiveNote</a>;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <a class="code" href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">mOutputs</a>[noteIndex].<a class="code" href="group___n_o_o_pub_func.html#ga044e62759958d717c7fa4fd1615e2ec1">BeginRelease</a>();</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div><div class="ttc" id="group___music_stat_func_html_ga85a22c905d56d4c5f4e62159bfecee8c"><div class="ttname"><a href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">Music.NoteToString</a></div><div class="ttdeci">static string NoteToString(PITCH aNoteValue)</div><div class="ttdoc">Gives a string representing a PITCH. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00480">Music.cs:480</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga73a09a4e4f09c0e5b3871dc9ad6c757e"><div class="ttname"><a href="group___v_i_m_priv.html#ga73a09a4e4f09c0e5b3871dc9ad6c757e">VirtualInstrumentManager.mHighestActiveNote</a></div><div class="ttdeci">Music.PITCH mHighestActiveNote</div><div class="ttdoc">The highest currently active note. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00324">VirtualInstrumentManager.cs:324</a></div></div>
<div class="ttc" id="group___music_enums_html_gabfce60192305965558a36e368ebd67c3"><div class="ttname"><a href="group___music_enums.html#gabfce60192305965558a36e368ebd67c3">Music.INSTRUMENT_TYPE</a></div><div class="ttdeci">INSTRUMENT_TYPE</div><div class="ttdoc">The types of instruments that are currently supported. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00085">Music.cs:85</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga5e3a5116e0dabb37e0ea21d73ac1567e"><div class="ttname"><a href="group___v_i_m_priv.html#ga5e3a5116e0dabb37e0ea21d73ac1567e">VirtualInstrumentManager.mLowestActiveNote</a></div><div class="ttdeci">Music.PITCH mLowestActiveNote</div><div class="ttdoc">The lowest currently active note. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00323">VirtualInstrumentManager.cs:323</a></div></div>
<div class="ttc" id="class_music_html"><div class="ttname"><a href="class_music.html">Music</a></div><div class="ttdoc">A container for everything related to music such as pitches and note lengths. This class does not nee...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00018">Music.cs:18</a></div></div>
<div class="ttc" id="group___n_o_o_pub_func_html_ga044e62759958d717c7fa4fd1615e2ec1"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga044e62759958d717c7fa4fd1615e2ec1">NoteOutputObject.BeginRelease</a></div><div class="ttdeci">void BeginRelease()</div><div class="ttdoc">Marks that the audio should begin fading out. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00136">NoteOutputObject.cs:136</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga108c350257b3a2080e06cd4a8251f6a4"><div class="ttname"><a href="group___v_i_m_priv.html#ga108c350257b3a2080e06cd4a8251f6a4">VirtualInstrumentManager.mInstrumentType</a></div><div class="ttdeci">Music.INSTRUMENT_TYPE mInstrumentType</div><div class="ttdoc">The type of instrument that is currently loaded. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00322">VirtualInstrumentManager.cs:322</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga53f837fd01475fa35629a650e7fa00e3"><div class="ttname"><a href="group___v_i_m_priv.html#ga53f837fd01475fa35629a650e7fa00e3">VirtualInstrumentManager.mOutputs</a></div><div class="ttdeci">NoteOutputObject [] mOutputs</div><div class="ttdoc">An array that holds the NoteOutputObjects that actually handle sound output. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00331">VirtualInstrumentManager.cs:331</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga97e3e73e05a7ab6027f25573712367a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97e3e73e05a7ab6027f25573712367a2">&#9670;&nbsp;</a></span>OnResumeDrumLoopEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnResumeDrumLoopEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles resuming a drum loop. </p>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l01258">1258</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00170">NoteOutputObject.ResumeAudio()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">mDrumLoopOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#ga2df8edec357dd4123146c9a7e8485ffb">ResumeAudio</a>();</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    }</div><div class="ttc" id="group___n_o_o_pub_func_html_ga2df8edec357dd4123146c9a7e8485ffb"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga2df8edec357dd4123146c9a7e8485ffb">NoteOutputObject.ResumeAudio</a></div><div class="ttdeci">void ResumeAudio()</div><div class="ttdoc">Resumes the audio. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00170">NoteOutputObject.cs:170</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga5f71cb71d240042312dcc13b481b068d"><div class="ttname"><a href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">VirtualInstrumentManager.mDrumLoopOutput</a></div><div class="ttdeci">NoteOutputObject mDrumLoopOutput</div><div class="ttdoc">A NoteOutputObject, but the note is actually a drum loop. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00329">VirtualInstrumentManager.cs:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaca3d2c89672fe0eb3d94b3cb2072de59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaca3d2c89672fe0eb3d94b3cb2072de59">&#9670;&nbsp;</a></span>OnResumeSongEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnResumeSongEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles resuming a song. </p>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l01266">1266</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00170">NoteOutputObject.ResumeAudio()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <a class="code" href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">mSongOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#ga2df8edec357dd4123146c9a7e8485ffb">ResumeAudio</a>();</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    }</div><div class="ttc" id="group___n_o_o_pub_func_html_ga2df8edec357dd4123146c9a7e8485ffb"><div class="ttname"><a href="group___n_o_o_pub_func.html#ga2df8edec357dd4123146c9a7e8485ffb">NoteOutputObject.ResumeAudio</a></div><div class="ttdeci">void ResumeAudio()</div><div class="ttdoc">Resumes the audio. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00170">NoteOutputObject.cs:170</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaa8d4f5642f5ac4dca4f4178b0052c78d"><div class="ttname"><a href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">VirtualInstrumentManager.mSongOutput</a></div><div class="ttdeci">NoteOutputObject mSongOutput</div><div class="ttdoc">A NoteOutputObject, but the note is actually a song. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00330">VirtualInstrumentManager.cs:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9d251d8b2036a3416680ced5d6125d0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9d251d8b2036a3416680ced5d6125d0e">&#9670;&nbsp;</a></span>OnStopDrumLoopEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnStopDrumLoopEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles stopping a drum loop. </p>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l01274">1274</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00281">NoteOutputObject.StopAudio()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">mDrumLoopOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#gae8a8e5bc027fd0186464a68399a4fecb">StopAudio</a>();</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div><div class="ttc" id="group___n_o_o_pub_func_html_gae8a8e5bc027fd0186464a68399a4fecb"><div class="ttname"><a href="group___n_o_o_pub_func.html#gae8a8e5bc027fd0186464a68399a4fecb">NoteOutputObject.StopAudio</a></div><div class="ttdeci">void StopAudio()</div><div class="ttdoc">Stops playing the audio. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00281">NoteOutputObject.cs:281</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_ga5f71cb71d240042312dcc13b481b068d"><div class="ttname"><a href="group___v_i_m_priv.html#ga5f71cb71d240042312dcc13b481b068d">VirtualInstrumentManager.mDrumLoopOutput</a></div><div class="ttdeci">NoteOutputObject mDrumLoopOutput</div><div class="ttdoc">A NoteOutputObject, but the note is actually a drum loop. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00329">VirtualInstrumentManager.cs:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5d9afb7a74107b5c6016555f0bb0a0a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d9afb7a74107b5c6016555f0bb0a0a8">&#9670;&nbsp;</a></span>OnStopSongEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualInstrumentManager.OnStopSongEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles stopping a song. </p>

<p class="definition">Definition at line <a class="el" href="_virtual_instrument_manager_8cs_source.html#l01282">1282</a> of file <a class="el" href="_virtual_instrument_manager_8cs_source.html">VirtualInstrumentManager.cs</a>.</p>

<p class="reference">References <a class="el" href="_note_output_object_8cs_source.html#l00281">NoteOutputObject.StopAudio()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_virtual_instrument_manager_8cs_source.html#l00563">VirtualInstrumentManager.SetUpEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <a class="code" href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">mSongOutput</a>.<a class="code" href="group___n_o_o_pub_func.html#gae8a8e5bc027fd0186464a68399a4fecb">StopAudio</a>();</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    }</div><div class="ttc" id="group___n_o_o_pub_func_html_gae8a8e5bc027fd0186464a68399a4fecb"><div class="ttname"><a href="group___n_o_o_pub_func.html#gae8a8e5bc027fd0186464a68399a4fecb">NoteOutputObject.StopAudio</a></div><div class="ttdeci">void StopAudio()</div><div class="ttdoc">Stops playing the audio. </div><div class="ttdef"><b>Definition:</b> <a href="_note_output_object_8cs_source.html#l00281">NoteOutputObject.cs:281</a></div></div>
<div class="ttc" id="group___v_i_m_priv_html_gaa8d4f5642f5ac4dca4f4178b0052c78d"><div class="ttname"><a href="group___v_i_m_priv.html#gaa8d4f5642f5ac4dca4f4178b0052c78d">VirtualInstrumentManager.mSongOutput</a></div><div class="ttdeci">NoteOutputObject mSongOutput</div><div class="ttdoc">A NoteOutputObject, but the note is actually a song. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00330">VirtualInstrumentManager.cs:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jan 31 2017 04:52:29 for VR Piano Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
