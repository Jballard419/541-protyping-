<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VR Piano Project: VirtualInstrument</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="piano-847409_1920.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VR Piano Project
   &#160;<span id="projectnumber">Prototype I</span>
   </div>
   <div id="projectbrief">Virtual-Reality Piano Project designed for EECS 541 &amp; 542 at the University of Kansas</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___v_i_base.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">VirtualInstrument<div class="ingroups"><a class="el" href="group___audio.html">Audio</a> &raquo; <a class="el" href="group___audio_management.html">Audio Management</a> &raquo; <a class="el" href="group___v_i.html">Virtual Instruments</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The base class that all types of <a class="el" href="group___v_i.html">Virtual Instruments</a> implement.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___v_i_base_const"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_i_base_const.html">Constants</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The base class that all types of <a class="el" href="group___v_i.html">Virtual Instruments</a> implement. </p>
<h1><a class="anchor" id="DocVIBaseInfo"></a>
Information</h1>
<p>The base <a class="el" href="class_virtual_instrument.html" title="A base class that contains generic functions and values relating to Virtual Instruments. ">VirtualInstrument</a> class performs tasks such as retrieving raw audio data from wav files and note mapping. This is a C# class rather than a Unity-specific class, so it is not attached to any GameObject itself. This is because it should only interact with the <a class="el" href="group___v_i_m.html">Virtual Instrument Manager</a>, and other classes should go through the <a class="el" href="group___v_i_m.html">manager</a> to get information about the instrument. This hiding of information is done for ease of using the audio code with other parts of the program by making all interactions with the audio go through a common hub.</p>
<p><br />
 This class is meant to be the base class for implementing specific instruments. It is not meant to be used by itself as anything other than a container that is checked at runtime. Also, every <a class="el" href="group___v_i.html">Virtual Instrument</a> is meant to be used as-is, so there is no modification that can be done on this class by other classes that do not inherit it.</p>
<h1><a class="anchor" id="DocVIBaseConst"></a>
Constants</h1>
<p>Constants used in order to set attributes of the <a class="el" href="group___v_i.html">Virtual Instrument</a>. <br />
 <a class="el" href="group___v_i_base_const.html">More details</a>.</p>
<h1><a class="anchor" id="DocVIBaseProVar"></a>
Protected Variables</h1>
<p>Variables that will be implemented by subclasses. <br />
 <a class="el" href="group___v_i_base_pro_var.html">More details</a>.</p>
<h1><a class="anchor" id="DocVIBaseConstruct"></a>
Constructors</h1>
<p>Constructors to create the <a class="el" href="class_virtual_instrument.html">Virtual Instrument</a>. <br />
 <a class="el" href="group___v_i_base_construct.html">More details</a>.</p>
<h1><a class="anchor" id="DocVIBasePubFunc"></a>
Public Functions</h1>
<p>Functions for other classes (usually the <a class="el" href="group___v_i_m.html">parent manager</a>) to get values from the instrument. <br />
 <a class="el" href="group___v_i_base_pub_func.html">More details</a>.</p>
<h1><a class="anchor" id="DocVIBaseProFunc"></a>
Protected Functions</h1>
<p>Functions that are used by the subclasses. <br />
 <a class="el" href="group___v_i_base_pro_func.html">More details</a>.</p>
<h1><a class="anchor" id="DocVIBasePrivFunc"></a>
Private Functions</h1>
<p>Functions common to all types of instruments. <br />
 <a class="el" href="group___v_i_base_priv_func.html">More details</a>.</p>
<h1><a class="anchor" id="DocVIBaseVirtFunc"></a>
Pure Virtual Functions</h1>
<p>Functions that subclasses are required to implement. <br />
 <a class="el" href="group___v_i_base_virt_func.html">More details</a>.</p>
<h1><a class="anchor" id="DocVICode"></a>
Code</h1>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_unity_engine.html">UnityEngine</a>;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.Assertions;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * @class VirtualInstrument</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * @brief A base class that contains generic functions and values relating to @link VI Virtual Instruments@endlink.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * The base VirtualInstrument class performs tasks such as retrieving raw audio data from </span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * wav files and note mapping. This is a C# class rather than a Unity-specific class, so it</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * is not attached to any GameObject itself. This is because it should only interact with the</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * @link VIM Virtual Instrument Manager@endlink, and other classes should go through the </span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * @link VIM manager@endlink to get information about the instrument. This hiding of information</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * is done for ease of using the audio code with other parts of the program by making all interactions</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * with the audio go through a common hub.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * @n This class is meant to be the base class for implementing specific instruments. It is not</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * meant to be used by itself as anything other than a container that is checked at runtime.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * Also, every @link VI Virtual Instrument@endlink is meant to be used as-is, so there </span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * is no modification that can be done on this class by other classes that do not inherit it.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * @nosubgrouping</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_virtual_instrument.html">VirtualInstrument</a></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">/*************************************************************************/</span><span class="comment">/** </span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">     * @defgroup VIBaseConst Constants</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">     * @ingroup VIBase</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">     * Constants used in order to set attributes of the @link VI Virtual Instrument@endlink.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">     * @{</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">    *****************************************************************************/</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="group___v_i_base_const.html#ga69a037919b64e1e3e0f2b949b2b6af2c">SAMPLE_INTERVAL</a> = 1.1337e-5f; <span class="comment">//!&lt; The number of seconds between waveform samples.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"></span>    <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="group___v_i_base_const.html#gaf060c000443f92784bd8db8d866d8b2a">NORMALIZED_PEAK</a> = -.1f; <span class="comment">//!&lt; The peak of the waveform after it&#39;s normalized.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">/*************************************************************************/</span><span class="comment">/** </span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">     * @defgroup VIBaseProVar Protected Variables</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">     * @ingroup VIBase</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">     * Variables that will be implemented by subclasses.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">     * @{</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">    *****************************************************************************/</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">bool</span>                               <a class="code" href="group___v_i_base_pro_var.html#ga47dbd8aa02ab32b8f802adfd2d3d81de">mIsDrum</a>; <span class="comment">//!&lt; Whether or not the virtual instrument is a @link DrumKit drum kit@endlink. </span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">bool</span>                               <a class="code" href="group___v_i_base_pro_var.html#ga8978807d1878db5aae91fbd057c46097">mLoaded</a>; <span class="comment">//!&lt; Whether or not the virtual instrument is loaded.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">float</span>                              <a class="code" href="group___v_i_base_pro_var.html#ga20c1d3d25ea666378d72c833d160ae2e">mSampleInterval</a>; <span class="comment">//!&lt; The waveform sample interval of the virtual instrument</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">float</span>[][][]                        <a class="code" href="group___v_i_base_pro_var.html#ga52e76d9b74408660584676035a92a2c6">mAudioData</a>; <span class="comment">//!&lt; The waveform samples of the virtual instrument. The indices are mapped according to [@link DefBID BuiltInDynamicsIndex@endlink][@link Music::PITCH Pitch@endlink][WaveformSample].</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">int</span>                                <a class="code" href="group___v_i_base_pro_var.html#ga9a602db8c9833ce75d95dd453c27d341">mNumFiles</a>; <span class="comment">//!&lt; The number of sample files</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">int</span>                                <a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>; <span class="comment">//!&lt; The number of @link DefBID Built-in Dynamics@endlink.</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">int</span>                                <a class="code" href="group___v_i_base_pro_var.html#gafc759a16324cf9b3f230bcbf040afcd2">mNumSupportedPitches</a>; <span class="comment">//!&lt; The number of @link Music::PITCH pitches@endlink supported by the instrument.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">int</span>                                <a class="code" href="group___v_i_base_pro_var.html#ga80b3d2ff29b27698eea6bcf2f8ddc5d7">mSampleRate</a>; <span class="comment">//!&lt; The sample rate of the virtual instrument</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">int</span>[]                              <a class="code" href="group___v_i_base_pro_var.html#gae3db4264dc2a96e99ea680c6d637e6bf">mBuiltInDynamicsThresholds</a>; <span class="comment">//!&lt; The @link DefBIDThresh thresholds@endlink for when to use a specific sound file</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>                        <a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a>; <span class="comment">//!&lt; The lowest supported @link Music::PITCH pitch@endlink of the instrument</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a>                        <a class="code" href="group___v_i_base_pro_var.html#ga61fb2c33b53a0f663047779d7ceb18f3">mHighestSupportedPitch</a>; <span class="comment">//!&lt; The highest supported @link Music::PITCH pitch@endlink of the instrument</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">string</span>                             <a class="code" href="group___v_i_base_pro_var.html#gac428224be859933d720a9c533fdb5643">mFilepath</a>; <span class="comment">//!&lt; The base filepath for the samples.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">string</span>[]                           <a class="code" href="group___v_i_base_pro_var.html#gab2add474ca506357688b5dd08cac4cb5">mFilenames</a>; <span class="comment">//!&lt; An array of filenames for the samples.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <span class="keywordtype">string</span>[]                           <a class="code" href="group___v_i_base_pro_var.html#ga87961e72f25fbc2256b614a394aa6f13">mBuiltInDynamics</a>; <span class="comment">//!&lt; The names of the @link DefBID Built-In Dynamics@endlink.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span>    <span class="keyword">protected</span> <a class="code" href="class_virtual_instrument_manager.html">VirtualInstrumentManager</a>           <a class="code" href="group___v_i_base_pro_var.html#gae4a87a656d9448cfea28215a6b9c3840">mParent</a>; <span class="comment">//!&lt; The @link VIM manager@endlink for this instrument</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">/*************************************************************************/</span><span class="comment">/** </span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">     * @}</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">     * @defgroup VIBaseConstruct Constructors</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">     * @ingroup VIBase</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">     * Constructors to create the @link VirtualInstrument Virtual Instrument@endlink.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">     * @{</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">    *****************************************************************************/</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">     * @brief Generic constructor. Sets default values and values that are common to all @link VI Virtual Instruments@endlink. </span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">     * @param[in] aParent The parent @link VIM manager@endlink for this instrument.</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">     *  </span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">     * Specific @link VI Virtual Instruments@endlink (such as the Piano) have their own constructor that is more</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">     * specialized, but this will be called for each child class as well. </span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">public</span> <a class="code" href="group___v_i_base_construct.html#ga7b438b5f812fa0d3a6e91d74a3c261c9">VirtualInstrument</a>( <a class="code" href="class_virtual_instrument_manager.html">VirtualInstrumentManager</a> aParent )</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        mParent = aParent;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">/*************************************************************************/</span><span class="comment">/** </span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">     * @}</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">     * @defgroup VIBasePubFunc Public Functions</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">     * @ingroup VIBase</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">     * Functions for other classes (usually the @link VIM parent manager@endlink) to get values from the instrument.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">     * @{</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">     ****************************************************************************/</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">    /** </span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">     * @brief Gets the index for which sound file to use for a @link Music::PITCH pitch@endlink at a given @link DefVel velocity@endlink.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">     * @param[in] aVelocity The given @link DefVel velocity@endlink from 0 (silent) to 100 (max volume).</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">     * @return The index of the sound file to use.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">     * </span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">     * For instruments with @link DefBID Built-In Dynamics@endlink (such as the Piano), this function takes a @link DefVel velocity@endlink</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">     * and returns the index of the sound file to use for playing the sound. </span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">     * If a function does not support @link DefBID Built-In Dynamics@endlink, this function returns 0.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">     * </span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">     * @see @link DefBIDThresh Built-In Dynamics Thresholds@endlink.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">     *  */</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">GetBuiltInDynamicsThresholdIndex</a>( <span class="keywordtype">int</span> aVelocity )</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="comment">// If there aren&#39;t any built-in dynamics, then just return 0.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">if</span>( mNumBuiltInDynamics == 0 )</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">// If there are built-in dynamics, then start from the highest and work down to find</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="comment">// which one to use. </span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keywordtype">int</span> dynamicsIndex = 0;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = mNumBuiltInDynamics - 1; i &gt; -1; i-- )</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="keywordflow">if</span>( aVelocity &lt;= mBuiltInDynamicsThresholds[i] )</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    dynamicsIndex = i;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">return</span> dynamicsIndex;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">     * @brief Gets the ranges for which sound file to use for a @link DefVel velocity@endlink. </span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">     * @return If the instrument supports @link DefBID Built-In Dynamics@endlink, then return its @link DefBIDThresh thresholds@endlink. Return null otherwise.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">int</span>[] <a class="code" href="group___v_i_base_pub_func.html#gac8fc20c49c1b97b6787ed1b3e0073a7f">GetBuiltInDynamicsThresholds</a>()</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___v_i_base_pro_var.html#gae3db4264dc2a96e99ea680c6d637e6bf">mBuiltInDynamicsThresholds</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">     * @brief Gets the factor by which a note&#39;s waveform is scaled in order to account for @link DefVel velocity@endlink.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">     * @param[in] aVelocity The @link DefVel velocity@endlink for the note from 0 (silent) to 100 (max volume).</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">     * @return A float between 0.0 and 1.0 where 0.0 means that the waveform should be made silent and 1.0 means that it should be unaltered.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">     * </span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">     * Instruments without @link DefBID Built-In Dynamics@endlink just divide the given @link DefVel velocity@endlink by 100, but instruments</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">     * with @link DefBID Built-in Dynamics@endlink map the factor to a ratio involving the @link DefBIDThresh Built-In Dynamics thresholds@endlink</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">     * so that the volumes for @link DefVel velocities@endlink near a @link DefBIDThresh threshold@endlink don&#39;t have significant differences.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">GetAdjustedVelocityFactor</a>( <span class="keywordtype">int</span> aVelocity )</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordtype">int</span> dynamicsIndex = 0;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordtype">float</span> velocityFactor = aVelocity / 100f;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="comment">// Calculate the velocity multiplier. The multiplier is a percentage that is used to adjust the</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">// levels of the audio data to modify the output volume. </span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">// If built-in dynamics are supported, then the velocity multiplier will range from the lower threshold divided by the higher threshold to 1.0.</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span>( mNumBuiltInDynamics != 0 )</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="comment">// See which built-in dynamics value we need to use. Start at the top threshold and work down.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = mNumBuiltInDynamics - 1; i &gt; -1; i-- )</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                <span class="keywordflow">if</span>( aVelocity &lt;= mBuiltInDynamicsThresholds[i] )</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    dynamicsIndex = i;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="comment">// Calculate the velocity factor.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordtype">float</span> inEnd = (float)mBuiltInDynamicsThresholds[dynamicsIndex];</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordtype">float</span> outEnd = 1f;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordtype">float</span> inStart = 0f;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordtype">float</span> outStart = 0f;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">if</span>( dynamicsIndex != 0 )</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                inStart = (float)mBuiltInDynamicsThresholds[dynamicsIndex - 1];</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                outStart = (float)mBuiltInDynamicsThresholds[dynamicsIndex - 1] / (<span class="keywordtype">float</span>)mBuiltInDynamicsThresholds[dynamicsIndex];</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            velocityFactor = outStart + ( ( ( outEnd - outStart ) / ( inEnd - inStart ) ) * ( (<span class="keywordtype">float</span>)aVelocity - inStart ) );</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">// If built-in dynamics are not supported, then just use the given velocity as a percentage. </span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">return</span> velocityFactor;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">     * @brief Gets the highest @link Music::PITCH pitch@endlink that this instrument can play.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">     * @return The highest @link Music::PITCH pitch@endlink that this instrument can play.</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">public</span> <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a> <a class="code" href="group___v_i_base_pub_func.html#ga859f3e73b1d28051cecf0ecd1c8b10ee">GetHighestSupportedPitch</a>()</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___v_i_base_pro_var.html#ga61fb2c33b53a0f663047779d7ceb18f3">mHighestSupportedPitch</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">     * @brief Gets the lowest @link Music::PITCH pitch@endlink that this instrument can play.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">     * @return The lowest @link Music::PITCH pitch@endlink supported by the instrument.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">public</span> <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a> <a class="code" href="group___v_i_base_pub_func.html#gac42b3915bbfec60b83650abd701d0690">GetLowestSupportedPitch</a>()</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">     * @brief Gets the total number of @link Music::PITCH pitches@endlink that this instrument can play.</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">     * @return The total number of @link Music::PITCH pitches@endlink that the instrument can play.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="group___v_i_base_pub_func.html#ga6ce5a7b3406269ea433be721d7d11177">GetNumOfSupportedPitches</a>()</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___v_i_base_pro_var.html#gafc759a16324cf9b3f230bcbf040afcd2">mNumSupportedPitches</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">    /** </span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">     * @brief Gets the raw audio data of each built-in dynamics value for a given @link Music::PITCH pitch@endlink. </span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">     * @param[in] aPitch The @link Music::PITCH pitch@endlink for which the data is retrieved.</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">     * @return a 2-D array of floats where the indices correspond to [@link DefBID BuiltInDynamicsIndex@endlink][WaveformSample]. </span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">     * </span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">     * The array is retrived by mapping the given @link Music::PITCH pitch@endlink to the second index of the mAudioData member.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span>[][] <a class="code" href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">GetAudioDataForPitch</a>( <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a> aPitch )</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        Assert.IsTrue( (<span class="keywordtype">int</span>)aPitch &gt;= (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a> &amp;&amp; (<span class="keywordtype">int</span>)aPitch &lt;= (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_base_pro_var.html#ga61fb2c33b53a0f663047779d7ceb18f3">mHighestSupportedPitch</a>,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="stringliteral">&quot;Tried to load the audio data for the note &quot;</span> + <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">NoteToString</a>( aPitch ) + <span class="stringliteral">&quot; which is not a note that is supported by this instrument!&quot;</span> );</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        Assert.IsNotNull( mAudioData, <span class="stringliteral">&quot;Tried to get data from a non-loaded virtual instrument!&quot;</span> );</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// If we need to load the clip, then load it.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">if</span>( mAudioData[0][(<span class="keywordtype">int</span>)aPitch] == null )</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="group___v_i_base_pro_func.html#gadbd95083895b09465fbc5b18115a1dbc">LoadAudioClipForPitch</a>( aPitch );</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">// Declare the returned array.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordtype">float</span>[][] data = null;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// If there aren&#39;t any built-in dynamics, then use a hard-coded index and copy the data to the array from the audio clip.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">if</span>( mNumBuiltInDynamics == 0 )</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            data = <span class="keyword">new</span> <span class="keywordtype">float</span>[1][];</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordtype">int</span> dataLength = mAudioData[0][(int)aPitch].Length;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            data[0] = <span class="keyword">new</span> <span class="keywordtype">float</span>[dataLength];</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; dataLength; i++ )</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                data[0][i] = mAudioData[0][(int)aPitch][i];</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment">// If there are built-in dynamics, then get the data from the audio clips for each corresponding file.</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            data = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>][];</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordtype">int</span> dataLength = 0;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>; i++ )</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                dataLength = mAudioData[i][(int)aPitch].Length;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                data[i] = <span class="keyword">new</span> <span class="keywordtype">float</span>[dataLength];</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; dataLength; j++ )</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                    data[i][j] = mAudioData[i][(int)aPitch][j];</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">return</span> data;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">     * @brief Gets the time interval between waveform samples for this instrument</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">     * @return The time interval between waveform samples for this instrument</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="group___v_i_base_pub_func.html#gabea22c3ab14c6989b9357da0bf052fbc">GetSampleInterval</a>()</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___v_i_base_pro_var.html#ga20c1d3d25ea666378d72c833d160ae2e">mSampleInterval</a>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">     * @brief Gets the sample rate for the wav files used to create the instrument.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     * @return The sample rate of the wav files used to create the instrument.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="group___v_i_base_pub_func.html#ga8be9d452abaf025dc7270c36b3cf379a">GetSampleRate</a>()</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___v_i_base_pro_var.html#ga80b3d2ff29b27698eea6bcf2f8ddc5d7">mSampleRate</a>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">     * @brief Gets whether or not the instrument has loaded.</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">     * @return True if the instrument has loaded. False otherwise.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="group___v_i_base_pub_func.html#gae8b5ac2e3402dfc50ea43f0e91fd9a29">IsLoaded</a>()</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___v_i_base_pro_var.html#ga8978807d1878db5aae91fbd057c46097">mLoaded</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">     * @brief Gets whether or not the instrument can play a specific @link Music::PITCH pitch@endlink.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">     * @param[in] aPitch The @link Music::PITCH pitch@endlink that is being checked.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">     * @return True if the @link Music::PITCH pitch@endlink can be played by the instrument. False otherwise.</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="group___v_i_base_pub_func.html#ga89655451c108a7ad5cb96ab308e33937">IsPitchSupported</a>( <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a> aPitch )</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">return</span> ( (<span class="keywordtype">int</span>)aPitch &gt;= (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a> &amp;&amp; (<span class="keywordtype">int</span>)aPitch &lt;= (<span class="keywordtype">int</span>)mHighestSupportedPitch );</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">/*************************************************************************/</span><span class="comment">/** </span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">     * @}</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">     * @defgroup VIBaseProFunc Protected Functions</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">     * @ingroup VIBase</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">     * Functions that are used by the subclasses.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">     * @{</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">     ****************************************************************************/</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">    /** </span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">     * @brief Loads all the audio clips associated with a pitch.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">     * @param[in] aPitch The pitch to load the audio clips for.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">    */</span>   </div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="group___v_i_base_pro_func.html#gadbd95083895b09465fbc5b18115a1dbc">LoadAudioClipForPitch</a>( <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a> aPitch )</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        Assert.IsTrue( aPitch &gt;= <a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a> &amp;&amp; aPitch &lt;= mHighestSupportedPitch,</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="stringliteral">&quot;Tried to load the pitch &quot;</span> + <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">NoteToString</a>( aPitch ) + <span class="stringliteral">&quot;, but that&#39;s out of the instrument&#39;s range from &quot;</span> +</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">NoteToString</a>( <a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a> ) + <span class="stringliteral">&quot; to &quot;</span> + <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">NoteToString</a>( mHighestSupportedPitch ) );</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="comment">// Get the file index.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordtype">int</span> fileIndex = (int)aPitch - (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        </div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// Get the audio clips for the pitch.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        AudioClip[] clips = null;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">// If Built-In Dynamics are not supported, then just get the one clip.</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span>( mNumBuiltInDynamics == 0 )</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="comment">// Get the audio file.</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            clips = <span class="keyword">new</span> AudioClip[1];</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            clips[0] = Resources.Load&lt;AudioClip&gt;( mFilenames[fileIndex] );</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            Assert.IsNotNull( clips[0], <span class="stringliteral">&quot;Failed to load audioclip from file &quot;</span> + mFilenames[fileIndex] );</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="comment">// Load the audio data.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            clips[0].LoadAudioData();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="comment">// Normalize the clip.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <a class="code" href="group___v_i_base_priv_func.html#gaecd4f9ead08a03be878b2085055a975c">NormalizeAudioClipsForPitch</a>( aPitch, clips );</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="comment">// If Built-In Dynamics are supported, then get all of the associated clips.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="comment">// Allocate space for the clips.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            clips = <span class="keyword">new</span> AudioClip[<a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>];</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="comment">// Load the clips.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>; i++ )</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <span class="comment">// Load the wav file.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                clips[i] = Resources.Load&lt;AudioClip&gt;( mFilenames[fileIndex] );</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                Assert.IsNotNull( clips[0], <span class="stringliteral">&quot;Failed to load audioclip from file &quot;</span> + mFilenames[fileIndex] );</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="comment">// Load the audio data into the AudioClip.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                clips[i].LoadAudioData();</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="comment">// Go to the next file.</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                fileIndex += <a class="code" href="group___v_i_base_pro_var.html#gafc759a16324cf9b3f230bcbf040afcd2">mNumSupportedPitches</a>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="comment">// Normalize the clips.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="group___v_i_base_priv_func.html#gaecd4f9ead08a03be878b2085055a975c">NormalizeAudioClipsForPitch</a>( aPitch, clips );</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="comment">// Clean up.</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        clips = null;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        Resources.UnloadUnusedAssets();</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        GC.Collect();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">    * @brief Loads the audio clips for the instrument. VirtualInstrument::CreateFilenames must be called prior to this function in order to actually find the files. </span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">    * </span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">    * This function handles the loading of the audio clips, getting their audio data, and passing the audio data to</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">    * VirtualInstrument::NormalizeAudioClips().</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="group___v_i_base_pro_func.html#ga873242f52d077ca4305b0b69a0100b55">LoadAudioClips</a>()</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">// Initialize index variables so that all of the files can be iterated through and appropriately </span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">// assigned to an array of audio clips. </span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordtype">int</span> index = (int)<a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordtype">int</span> fileIndex = 0;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        AudioClip[][] audioClips = null;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="comment">// If there aren&#39;t any built-in dynamics, then use a hard-coded index of 0 for the outer array.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">if</span>( mNumBuiltInDynamics == 0 )</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="comment">// Initialize the array of audio clips. In order to account for instruments differing in the range of notes </span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="comment">// that they support, the inner audio clip array is set to have an element for every possible note. Unsupported</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="comment">// notes will have null audio clips at their indices. Drum kits will not have to worry about this.   </span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            audioClips = <span class="keyword">new</span> AudioClip[1][];</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">if</span>( mIsDrum )</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                audioClips[0] = <span class="keyword">new</span> AudioClip[<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_constants.html#gabce1a1ac5b9b6355af6bd7fb3868467a">MAX_SUPPORTED_DRUMS</a>];</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                audioClips[0] = <span class="keyword">new</span> AudioClip[<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_constants.html#gaaf07da909a12e9fec0e43b70864f27b7">MAX_SUPPORTED_NOTES</a>];</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="comment">// The indices of the loaded audio clips are mapped to their corresponding note. </span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">while</span>( index &lt;= (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_base_pro_var.html#ga61fb2c33b53a0f663047779d7ceb18f3">mHighestSupportedPitch</a> )</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <span class="comment">// Load the audio clip into the audio clip array.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                audioClips[0][index] = Resources.Load&lt;AudioClip&gt;( mFilenames[fileIndex] );</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                Assert.IsNotNull( audioClips[0][index], <span class="stringliteral">&quot;Failed to load audioclip from file &quot;</span> + mFilenames[fileIndex] );</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                <span class="comment">// Load the audio data for the audio clip</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                audioClips[0][index].LoadAudioData();</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="comment">// Increment the index variables.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                index++;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                fileIndex++;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                Assert.IsTrue( fileIndex &lt;= mNumFiles, <span class="stringliteral">&quot;Tried to load more files than were available. Recheck how many files are availabled for the virtual instrument&quot;</span> );</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="comment">// If built-in dynamics are available for this instrument, then load audio clips for each built-in dynamics value.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="comment">// Initializ the outer array of audio clips</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            audioClips = <span class="keyword">new</span> AudioClip[<a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>][];</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment">// Iterate through each outer array.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>; i++ )</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="comment">// Initialize the inner array of audio clips. In order to account for instruments differing in the range of notes </span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <span class="comment">// that they support, the inner audio clip array is set to have an element for every possible note. Unsupported</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="comment">// notes will have null audio clips at their indices. Drum kits will not have to worry about this.</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">if</span>( mIsDrum )</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    audioClips[i] = <span class="keyword">new</span> AudioClip[<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_constants.html#gabce1a1ac5b9b6355af6bd7fb3868467a">MAX_SUPPORTED_DRUMS</a>];</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    audioClips[i] = <span class="keyword">new</span> AudioClip[<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_constants.html#gaaf07da909a12e9fec0e43b70864f27b7">MAX_SUPPORTED_NOTES</a>];</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <span class="comment">// The indices of the loaded audio clips are mapped to their corresponding note. </span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                <span class="keywordflow">while</span>( index &lt;= (<span class="keywordtype">int</span>)mHighestSupportedPitch )</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    <span class="comment">// Load the audio clip into the audio clip array.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    audioClips[i][index] = Resources.Load&lt;AudioClip&gt;( mFilenames[fileIndex] );</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    Assert.IsNotNull( audioClips[0][index], <span class="stringliteral">&quot;Failed to load audioclip from file &quot;</span> + mFilenames[fileIndex] );</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    <span class="comment">// Load the audio data for the audio clip</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    audioClips[i][index].LoadAudioData();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    <span class="comment">// Increment the index variables.</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    index++;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    fileIndex++;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    Assert.IsTrue( fileIndex &lt;= mNumFiles, <span class="stringliteral">&quot;Tried to load more files than were available. Recheck how many files are availabled for the piano virtual instrument&quot;</span> );</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                <span class="comment">// Reset the note index when going to the next outer array. </span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                index = (int)<a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// Normalize the audio clips.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <a class="code" href="group___v_i_base_priv_func.html#ga0262de8cfb1e671b01ba76de2e9d140a">NormalizeAudioClips</a>( audioClips );</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// Get rid of unused assets.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        audioClips = null;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        Resources.UnloadUnusedAssets();</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        GC.Collect();</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">/*************************************************************************/</span><span class="comment">/** </span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">     * @}</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">     * @defgroup VIBasePrivFunc Private Functions</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">     * @ingroup VIBase</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">     * Functions common to all types of instruments.</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">     * @{</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">     ****************************************************************************/</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">     * @brief Normalizes the data from the audio clips and puts them in the mAudioData member variable.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">     * @param[in] aPitch The pitch that corresponds to the audio clips.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">     * @param[in] aClips The clips to normalize.</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">     * </span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">     * This function makes it so that the waveforms of the samples used for the instrument</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">     * have a peak of -0.1. If @link DefBID Built-In Dynamics@endlink are supported, then the peak is multiplied</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">     * by a ratio of the @link DefBIDThresh Built-In Dynamics thresholds@endlink. </span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">     * For example, waveforms that are used for @link DefVel velocities@endlink from 50-75 would have a peak </span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">     * that is 75% of the peak of the waveforms used for @link DefVel velocities@endlink from 76-100. </span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="group___v_i_base_priv_func.html#gaecd4f9ead08a03be878b2085055a975c">NormalizeAudioClipsForPitch</a>( <a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">PITCH</a> aPitch, AudioClip[] aClips )</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="comment">// Make some temp variables for iterating through the data in the clips.</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordtype">float</span> max = 0f;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordtype">float</span>[] dataFromClip = null;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordtype">int</span> clipLength = 0;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordtype">int</span> pitchIndex = (int)aPitch;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// If the instrument doesn&#39;t support Built-In Dynamics, then the array is actually just one clip.</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">if</span>( mNumBuiltInDynamics == 0 )</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="comment">// Get the length of the clip.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            clipLength = aClips[0].samples;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="comment">// Get the data of the clip</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            dataFromClip = <span class="keyword">new</span> <span class="keywordtype">float</span>[clipLength];</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            aClips[0].GetData( dataFromClip, 0 );</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="comment">// Allocate a place in the audio data container.</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            mAudioData[0][pitchIndex] = <span class="keyword">new</span> <span class="keywordtype">float</span>[clipLength];</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="comment">// Get the max value of this clip&#39;s data.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; clipLength; i++ )</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="keywordflow">if</span>( Mathf.Abs( dataFromClip[i] ) &gt; max )</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    max = Mathf.Abs( dataFromClip[i] );</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="comment">// Set the normalize factor.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordtype">float</span> normalizeFactor = NORMALIZED_PEAK / max;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="comment">// Normalize the clip and put it in the audio data container</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; clipLength; i++ )</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                mAudioData[0][pitchIndex][i] = dataFromClip[i] * normalizeFactor;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">// If the instrument does support Built-In Dynamics, then we need to iterate through each</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="comment">// file associated with the clip.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="comment">// Set up the normalized peaks for each Built-In Dynamic.</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordtype">float</span>[] normalizedPeaks = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>];</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>; i++ )</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                normalizedPeaks[i] = NORMALIZED_PEAK * ( (float)mBuiltInDynamicsThresholds[i] / (<span class="keywordtype">float</span>)mBuiltInDynamicsThresholds[mNumBuiltInDynamics - 1] );</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="comment">// Iterate through each clip associated with the pitch.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>; i++ )</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                <span class="comment">// Get the length of the clip data. </span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                clipLength = aClips[i].samples;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <span class="comment">// Initialize the clip&#39;s spot in the audio data container.</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                mAudioData[i][pitchIndex] = <span class="keyword">new</span> <span class="keywordtype">float</span>[clipLength];</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                <span class="comment">// Get the clip&#39;s data</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                dataFromClip = <span class="keyword">new</span> <span class="keywordtype">float</span>[clipLength];</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                aClips[i].GetData( dataFromClip, 0 );</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <span class="comment">// Get the max value of the clip data.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; clipLength; j++ )</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                    <span class="keywordflow">if</span>( Mathf.Abs( dataFromClip[j] ) &gt; max )</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        max = Mathf.Abs( dataFromClip[j] );</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                    }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                <span class="comment">// Get the normalize factor for this clip.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keywordtype">float</span> normalizeFactor = normalizedPeaks[i] / max;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="comment">// Normalize the clip and put the normalized data into the audio data array.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; clipLength; j++ )</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    mAudioData[i][pitchIndex][j] = dataFromClip[j] * normalizeFactor;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                <span class="comment">// Reset the max value for the next clip.</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                max = 0f;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">     * @brief Normalizes the data from the audio clips and puts them in the mAudioData member variable.</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">     * @param[in] aAudioClips The audio clips that were loaded for this instrument.</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">     * </span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">     * This function makes it so that the waveforms of the samples used for the instrument</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">     * have a peak of -0.1. If @link DefBID Built-In Dynamics@endlink are supported, then the peak is multiplied</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">     * by a ratio of the @link DefBIDThresh Built-In Dynamics thresholds@endlink. </span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">     * For example, waveforms that are used for @link DefVel velocities@endlink from 50-75 would have a peak </span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">     * that is 75% of the peak of the waveforms used for @link DefVel velocities@endlink from 76-100. </span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="group___v_i_base_priv_func.html#ga0262de8cfb1e671b01ba76de2e9d140a">NormalizeAudioClips</a>( AudioClip[][] aAudioClips )</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordtype">float</span> max = 0f;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordtype">float</span>[] temp = null;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordtype">int</span> dataLength = 0;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="comment">// Iterate through every audio clip.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">if</span>( mNumBuiltInDynamics != 0 )</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="comment">// Initialize the audio data 3-D array.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            mAudioData = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>][][];</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="comment">// Set up the normalized peaks for each Built-In Dynamic.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordtype">float</span>[] normalizedPeaks = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>];</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>; i++ )</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                normalizedPeaks[i] = NORMALIZED_PEAK * ( (float)mBuiltInDynamicsThresholds[i] / (<span class="keywordtype">float</span>)mBuiltInDynamicsThresholds[mNumBuiltInDynamics - 1] );</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="comment">// Normalize all of the clips</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">mNumBuiltInDynamics</a>; i++ )</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                <span class="comment">// Initialize the interior 2-D array of the audio data and account for drums.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                <span class="keywordflow">if</span>( mIsDrum )</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                    mAudioData[i] = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_constants.html#gabce1a1ac5b9b6355af6bd7fb3868467a">MAX_SUPPORTED_DRUMS</a>][];</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                    mAudioData[i] = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_constants.html#gaaf07da909a12e9fec0e43b70864f27b7">MAX_SUPPORTED_NOTES</a>][];</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a>; j &lt;= (int)mHighestSupportedPitch; j++ )</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    <span class="comment">// Get the length of the clip data and initialize the inner audio data array. </span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    dataLength = aAudioClips[i][j].samples;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                    mAudioData[i][j] = <span class="keyword">new</span> <span class="keywordtype">float</span>[dataLength];</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    <span class="comment">// Get this clip&#39;s data</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    temp = <span class="keyword">new</span> <span class="keywordtype">float</span>[dataLength];</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                    aAudioClips[i][j].GetData( temp, 0 );</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                    <span class="comment">// Get the max value of the clip data.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> k = 0; k &lt; dataLength; k++ )</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                        <span class="keywordflow">if</span>( Mathf.Abs( temp[k] ) &gt; max )</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                        {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                            max = Mathf.Abs( temp[k] );</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                        }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    <span class="comment">// Get the normalize factor for this clip.</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    <span class="keywordtype">float</span> normalizeFactor = normalizedPeaks[i] / max;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    <span class="comment">// Normalize the clip and put the normalized data into the audio data array.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> k = 0; k &lt; dataLength; k++ )</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                        mAudioData[i][j][k] = temp[k] * normalizeFactor;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                    }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    <span class="comment">// Reset the max value for the next clip.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    max = 0f;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="comment">// Iterate through every audio clip.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <span class="comment">// Allocate the audio data 3-D array and its interior 2-D array.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            mAudioData = <span class="keyword">new</span> <span class="keywordtype">float</span>[1][][];</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="comment">// Account for drums when allocating the 2-D array.</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <span class="keywordflow">if</span>( mIsDrum )</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                mAudioData[0] = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_constants.html#gabce1a1ac5b9b6355af6bd7fb3868467a">MAX_SUPPORTED_DRUMS</a>][];</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                mAudioData[0] = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="class_music.html">Music</a>.<a class="code" href="group___music_constants.html#gaaf07da909a12e9fec0e43b70864f27b7">MAX_SUPPORTED_NOTES</a>][];</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="comment">// Set the normalized peak.</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="keywordtype">float</span> normalizedPeak = -.1f;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="comment">// Normalize all of the audio clips.</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = (<span class="keywordtype">int</span>)<a class="code" href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">mLowestSupportedPitch</a>; i &lt;= (int)mHighestSupportedPitch; i++ )</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                dataLength = aAudioClips[0][i].samples;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                mAudioData[0][i] = <span class="keyword">new</span> <span class="keywordtype">float</span>[dataLength];</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <span class="comment">// Get the clip data</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                temp = <span class="keyword">new</span> <span class="keywordtype">float</span>[dataLength];</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                aAudioClips[0][i].GetData( temp, 0 );</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <span class="comment">// Get the max value of this clip&#39;s data.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; dataLength; j++ )</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    <span class="keywordflow">if</span>( Mathf.Abs( temp[j] ) &gt; max )</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        max = Mathf.Abs( temp[j] );</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="comment">// Set the normalize factor.</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <span class="keywordtype">float</span> normalizeFactor = normalizedPeak / max;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                <span class="comment">// Normalize the clip.</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; aAudioClips[0][i].samples; j++ )</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    mAudioData[0][i][j] = temp[j] * normalizeFactor;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="comment">// Reset the max value for the next clip.</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                max = 0f;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">/*************************************************************************/</span><span class="comment">/** </span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">     * @}</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">     * @defgroup VIBaseVirtFunc Pure Virtual Functions</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">     * @ingroup VIBase</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">     * Functions that subclasses are required to implement.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">     * @{</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">     ****************************************************************************/</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">     * @brief Creates the filenames for the sample files. </span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="group___v_i_base_virt_func.html#gaacfc9521214176292bfb9665556fb991">CreateFilenames</a>() { }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">     * @brief Initializes variables related to @link DefBID Built-In Dynamics@endlink</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="group___v_i_base_virt_func.html#ga995456c03ee54543b285188c51c29a07">InitializeBuiltInDynamics</a>() { }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">    /** @} */</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;}</div><div class="ttc" id="group___music_stat_func_html_ga85a22c905d56d4c5f4e62159bfecee8c"><div class="ttname"><a href="group___music_stat_func.html#ga85a22c905d56d4c5f4e62159bfecee8c">Music.NoteToString</a></div><div class="ttdeci">static string NoteToString(PITCH aNoteValue)</div><div class="ttdoc">Gives a string representing a PITCH. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00480">Music.cs:480</a></div></div>
<div class="ttc" id="group___v_i_base_priv_func_html_ga0262de8cfb1e671b01ba76de2e9d140a"><div class="ttname"><a href="group___v_i_base_priv_func.html#ga0262de8cfb1e671b01ba76de2e9d140a">VirtualInstrument.NormalizeAudioClips</a></div><div class="ttdeci">void NormalizeAudioClips(AudioClip[][] aAudioClips)</div><div class="ttdoc">Normalizes the data from the audio clips and puts them in the mAudioData member variable. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00574">VirtualInstrument.cs:574</a></div></div>
<div class="ttc" id="group___v_i_base_priv_func_html_gaecd4f9ead08a03be878b2085055a975c"><div class="ttname"><a href="group___v_i_base_priv_func.html#gaecd4f9ead08a03be878b2085055a975c">VirtualInstrument.NormalizeAudioClipsForPitch</a></div><div class="ttdeci">void NormalizeAudioClipsForPitch(Music.PITCH aPitch, AudioClip[] aClips)</div><div class="ttdoc">Normalizes the data from the audio clips and puts them in the mAudioData member variable. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00477">VirtualInstrument.cs:477</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga47dbd8aa02ab32b8f802adfd2d3d81de"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga47dbd8aa02ab32b8f802adfd2d3d81de">VirtualInstrument.mIsDrum</a></div><div class="ttdeci">bool mIsDrum</div><div class="ttdoc">Whether or not the virtual instrument is a drum kit. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00043">VirtualInstrument.cs:43</a></div></div>
<div class="ttc" id="class_virtual_instrument_manager_html"><div class="ttname"><a href="class_virtual_instrument_manager.html">VirtualInstrumentManager</a></div><div class="ttdoc">The central hub for all audio management. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_manager_8cs_source.html#l00029">VirtualInstrumentManager.cs:29</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga52e76d9b74408660584676035a92a2c6"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga52e76d9b74408660584676035a92a2c6">VirtualInstrument.mAudioData</a></div><div class="ttdeci">float [][][] mAudioData</div><div class="ttdoc">The waveform samples of the virtual instrument. The indices are mapped according to [BuiltInDynamicsI...</div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00046">VirtualInstrument.cs:46</a></div></div>
<div class="ttc" id="group___v_i_base_pro_func_html_gadbd95083895b09465fbc5b18115a1dbc"><div class="ttname"><a href="group___v_i_base_pro_func.html#gadbd95083895b09465fbc5b18115a1dbc">VirtualInstrument.LoadAudioClipForPitch</a></div><div class="ttdeci">void LoadAudioClipForPitch(Music.PITCH aPitch)</div><div class="ttdoc">Loads all the audio clips associated with a pitch. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00304">VirtualInstrument.cs:304</a></div></div>
<div class="ttc" id="group___music_constants_html_gaaf07da909a12e9fec0e43b70864f27b7"><div class="ttname"><a href="group___music_constants.html#gaaf07da909a12e9fec0e43b70864f27b7">Music.MAX_SUPPORTED_NOTES</a></div><div class="ttdeci">static int MAX_SUPPORTED_NOTES</div><div class="ttdoc">The maximum number of pitches that a VirtualInstrument could support. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00033">Music.cs:33</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga9a602db8c9833ce75d95dd453c27d341"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga9a602db8c9833ce75d95dd453c27d341">VirtualInstrument.mNumFiles</a></div><div class="ttdeci">int mNumFiles</div><div class="ttdoc">The number of sample files. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00047">VirtualInstrument.cs:47</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gac8fc20c49c1b97b6787ed1b3e0073a7f"><div class="ttname"><a href="group___v_i_base_pub_func.html#gac8fc20c49c1b97b6787ed1b3e0073a7f">VirtualInstrument.GetBuiltInDynamicsThresholds</a></div><div class="ttdeci">int [] GetBuiltInDynamicsThresholds()</div><div class="ttdoc">Gets the ranges for which sound file to use for a velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00125">VirtualInstrument.cs:125</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_ga8be9d452abaf025dc7270c36b3cf379a"><div class="ttname"><a href="group___v_i_base_pub_func.html#ga8be9d452abaf025dc7270c36b3cf379a">VirtualInstrument.GetSampleRate</a></div><div class="ttdeci">int GetSampleRate()</div><div class="ttdoc">Gets the sample rate for the wav files used to create the instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00267">VirtualInstrument.cs:267</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_gab2add474ca506357688b5dd08cac4cb5"><div class="ttname"><a href="group___v_i_base_pro_var.html#gab2add474ca506357688b5dd08cac4cb5">VirtualInstrument.mFilenames</a></div><div class="ttdeci">string [] mFilenames</div><div class="ttdoc">An array of filenames for the samples. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00055">VirtualInstrument.cs:55</a></div></div>
<div class="ttc" id="group___music_enums_html_ga508f69b199ea518f935486c990edac1d"><div class="ttname"><a href="group___music_enums.html#ga508f69b199ea518f935486c990edac1d">Music.PITCH</a></div><div class="ttdeci">PITCH</div><div class="ttdoc">The possible pitches that can be played. The range is from C0 to B9 with an extra entry for a rest no...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00124">Music.cs:124</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga20c1d3d25ea666378d72c833d160ae2e"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga20c1d3d25ea666378d72c833d160ae2e">VirtualInstrument.mSampleInterval</a></div><div class="ttdeci">float mSampleInterval</div><div class="ttdoc">The waveform sample interval of the virtual instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00045">VirtualInstrument.cs:45</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_ga6ce5a7b3406269ea433be721d7d11177"><div class="ttname"><a href="group___v_i_base_pub_func.html#ga6ce5a7b3406269ea433be721d7d11177">VirtualInstrument.GetNumOfSupportedPitches</a></div><div class="ttdeci">int GetNumOfSupportedPitches()</div><div class="ttdoc">Gets the total number of pitches that this instrument can play. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00197">VirtualInstrument.cs:197</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gaf715f7c3bbd2f1a2fa543b2f0684f8a6"><div class="ttname"><a href="group___v_i_base_pub_func.html#gaf715f7c3bbd2f1a2fa543b2f0684f8a6">VirtualInstrument.GetAudioDataForPitch</a></div><div class="ttdeci">float [][] GetAudioDataForPitch(Music.PITCH aPitch)</div><div class="ttdoc">Gets the raw audio data of each built-in dynamics value for a given pitch. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00209">VirtualInstrument.cs:209</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga8978807d1878db5aae91fbd057c46097"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga8978807d1878db5aae91fbd057c46097">VirtualInstrument.mLoaded</a></div><div class="ttdeci">bool mLoaded</div><div class="ttdoc">Whether or not the virtual instrument is loaded. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00044">VirtualInstrument.cs:44</a></div></div>
<div class="ttc" id="class_music_html"><div class="ttname"><a href="class_music.html">Music</a></div><div class="ttdoc">A container for everything related to music such as pitches and note lengths. This class does not nee...</div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00018">Music.cs:18</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga87961e72f25fbc2256b614a394aa6f13"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga87961e72f25fbc2256b614a394aa6f13">VirtualInstrument.mBuiltInDynamics</a></div><div class="ttdeci">string [] mBuiltInDynamics</div><div class="ttdoc">The names of the Built-In Dynamics. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00056">VirtualInstrument.cs:56</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_gae4a87a656d9448cfea28215a6b9c3840"><div class="ttname"><a href="group___v_i_base_pro_var.html#gae4a87a656d9448cfea28215a6b9c3840">VirtualInstrument.mParent</a></div><div class="ttdeci">VirtualInstrumentManager mParent</div><div class="ttdoc">The manager for this instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00057">VirtualInstrument.cs:57</a></div></div>
<div class="ttc" id="group___music_constants_html_gabce1a1ac5b9b6355af6bd7fb3868467a"><div class="ttname"><a href="group___music_constants.html#gabce1a1ac5b9b6355af6bd7fb3868467a">Music.MAX_SUPPORTED_DRUMS</a></div><div class="ttdeci">static int MAX_SUPPORTED_DRUMS</div><div class="ttdoc">The maximum number of drums that a DrumKit could support. </div><div class="ttdef"><b>Definition:</b> <a href="_music_8cs_source.html#l00034">Music.cs:34</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gac42b3915bbfec60b83650abd701d0690"><div class="ttname"><a href="group___v_i_base_pub_func.html#gac42b3915bbfec60b83650abd701d0690">VirtualInstrument.GetLowestSupportedPitch</a></div><div class="ttdeci">Music.PITCH GetLowestSupportedPitch()</div><div class="ttdoc">Gets the lowest pitch that this instrument can play. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00188">VirtualInstrument.cs:188</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga80b3d2ff29b27698eea6bcf2f8ddc5d7"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga80b3d2ff29b27698eea6bcf2f8ddc5d7">VirtualInstrument.mSampleRate</a></div><div class="ttdeci">int mSampleRate</div><div class="ttdoc">The sample rate of the virtual instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00050">VirtualInstrument.cs:50</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga61fb2c33b53a0f663047779d7ceb18f3"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga61fb2c33b53a0f663047779d7ceb18f3">VirtualInstrument.mHighestSupportedPitch</a></div><div class="ttdeci">Music.PITCH mHighestSupportedPitch</div><div class="ttdoc">The highest supported pitch of the instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00053">VirtualInstrument.cs:53</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_ga859f3e73b1d28051cecf0ecd1c8b10ee"><div class="ttname"><a href="group___v_i_base_pub_func.html#ga859f3e73b1d28051cecf0ecd1c8b10ee">VirtualInstrument.GetHighestSupportedPitch</a></div><div class="ttdeci">Music.PITCH GetHighestSupportedPitch()</div><div class="ttdoc">Gets the highest pitch that this instrument can play. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00179">VirtualInstrument.cs:179</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_gac265f64f759d267ee1e1680f8d387011"><div class="ttname"><a href="group___v_i_base_pro_var.html#gac265f64f759d267ee1e1680f8d387011">VirtualInstrument.mNumBuiltInDynamics</a></div><div class="ttdeci">int mNumBuiltInDynamics</div><div class="ttdoc">The number of Built-in Dynamics. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00048">VirtualInstrument.cs:48</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_gafc759a16324cf9b3f230bcbf040afcd2"><div class="ttname"><a href="group___v_i_base_pro_var.html#gafc759a16324cf9b3f230bcbf040afcd2">VirtualInstrument.mNumSupportedPitches</a></div><div class="ttdeci">int mNumSupportedPitches</div><div class="ttdoc">The number of pitches supported by the instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00049">VirtualInstrument.cs:49</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_ga89655451c108a7ad5cb96ab308e33937"><div class="ttname"><a href="group___v_i_base_pub_func.html#ga89655451c108a7ad5cb96ab308e33937">VirtualInstrument.IsPitchSupported</a></div><div class="ttdeci">bool IsPitchSupported(Music.PITCH aPitch)</div><div class="ttdoc">Gets whether or not the instrument can play a specific pitch. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00286">VirtualInstrument.cs:286</a></div></div>
<div class="ttc" id="group___v_i_base_virt_func_html_gaacfc9521214176292bfb9665556fb991"><div class="ttname"><a href="group___v_i_base_virt_func.html#gaacfc9521214176292bfb9665556fb991">VirtualInstrument.CreateFilenames</a></div><div class="ttdeci">virtual void CreateFilenames()</div><div class="ttdoc">Creates the filenames for the sample files. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00703">VirtualInstrument.cs:703</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gabea22c3ab14c6989b9357da0bf052fbc"><div class="ttname"><a href="group___v_i_base_pub_func.html#gabea22c3ab14c6989b9357da0bf052fbc">VirtualInstrument.GetSampleInterval</a></div><div class="ttdeci">float GetSampleInterval()</div><div class="ttdoc">Gets the time interval between waveform samples for this instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00258">VirtualInstrument.cs:258</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gae8b5ac2e3402dfc50ea43f0e91fd9a29"><div class="ttname"><a href="group___v_i_base_pub_func.html#gae8b5ac2e3402dfc50ea43f0e91fd9a29">VirtualInstrument.IsLoaded</a></div><div class="ttdeci">bool IsLoaded()</div><div class="ttdoc">Gets whether or not the instrument has loaded. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00276">VirtualInstrument.cs:276</a></div></div>
<div class="ttc" id="group___v_i_base_const_html_gaf060c000443f92784bd8db8d866d8b2a"><div class="ttname"><a href="group___v_i_base_const.html#gaf060c000443f92784bd8db8d866d8b2a">VirtualInstrument.NORMALIZED_PEAK</a></div><div class="ttdeci">const float NORMALIZED_PEAK</div><div class="ttdoc">The peak of the waveform after it&amp;#39;s normalized. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00035">VirtualInstrument.cs:35</a></div></div>
<div class="ttc" id="group___v_i_base_construct_html_ga7b438b5f812fa0d3a6e91d74a3c261c9"><div class="ttname"><a href="group___v_i_base_construct.html#ga7b438b5f812fa0d3a6e91d74a3c261c9">VirtualInstrument.VirtualInstrument</a></div><div class="ttdeci">VirtualInstrument(VirtualInstrumentManager aParent)</div><div class="ttdoc">Generic constructor. Sets default values and values that are common to all Virtual Instruments...</div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00074">VirtualInstrument.cs:74</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_gac428224be859933d720a9c533fdb5643"><div class="ttname"><a href="group___v_i_base_pro_var.html#gac428224be859933d720a9c533fdb5643">VirtualInstrument.mFilepath</a></div><div class="ttdeci">string mFilepath</div><div class="ttdoc">The base filepath for the samples. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00054">VirtualInstrument.cs:54</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gae638c68bd0e79d0b99495be69e50f49d"><div class="ttname"><a href="group___v_i_base_pub_func.html#gae638c68bd0e79d0b99495be69e50f49d">VirtualInstrument.GetAdjustedVelocityFactor</a></div><div class="ttdeci">float GetAdjustedVelocityFactor(int aVelocity)</div><div class="ttdoc">Gets the factor by which a note&amp;#39;s waveform is scaled in order to account for velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00140">VirtualInstrument.cs:140</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_gae3db4264dc2a96e99ea680c6d637e6bf"><div class="ttname"><a href="group___v_i_base_pro_var.html#gae3db4264dc2a96e99ea680c6d637e6bf">VirtualInstrument.mBuiltInDynamicsThresholds</a></div><div class="ttdeci">int [] mBuiltInDynamicsThresholds</div><div class="ttdoc">The thresholds for when to use a specific sound file. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00051">VirtualInstrument.cs:51</a></div></div>
<div class="ttc" id="group___v_i_base_virt_func_html_ga995456c03ee54543b285188c51c29a07"><div class="ttname"><a href="group___v_i_base_virt_func.html#ga995456c03ee54543b285188c51c29a07">VirtualInstrument.InitializeBuiltInDynamics</a></div><div class="ttdeci">virtual void InitializeBuiltInDynamics()</div><div class="ttdoc">Initializes variables related to Built-In Dynamics. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00708">VirtualInstrument.cs:708</a></div></div>
<div class="ttc" id="group___v_i_base_pro_func_html_ga873242f52d077ca4305b0b69a0100b55"><div class="ttname"><a href="group___v_i_base_pro_func.html#ga873242f52d077ca4305b0b69a0100b55">VirtualInstrument.LoadAudioClips</a></div><div class="ttdeci">void LoadAudioClips()</div><div class="ttdoc">Loads the audio clips for the instrument. VirtualInstrument::CreateFilenames must be called prior to ...</div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00366">VirtualInstrument.cs:366</a></div></div>
<div class="ttc" id="class_virtual_instrument_html"><div class="ttname"><a href="class_virtual_instrument.html">VirtualInstrument</a></div><div class="ttdoc">A base class that contains generic functions and values relating to Virtual Instruments. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00026">VirtualInstrument.cs:26</a></div></div>
<div class="ttc" id="group___v_i_base_pro_var_html_ga3cae52b1bcc0178a8a6b03c7aaf7aac8"><div class="ttname"><a href="group___v_i_base_pro_var.html#ga3cae52b1bcc0178a8a6b03c7aaf7aac8">VirtualInstrument.mLowestSupportedPitch</a></div><div class="ttdeci">Music.PITCH mLowestSupportedPitch</div><div class="ttdoc">The lowest supported pitch of the instrument. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00052">VirtualInstrument.cs:52</a></div></div>
<div class="ttc" id="namespace_unity_engine_html"><div class="ttname"><a href="namespace_unity_engine.html">UnityEngine</a></div></div>
<div class="ttc" id="group___v_i_base_const_html_ga69a037919b64e1e3e0f2b949b2b6af2c"><div class="ttname"><a href="group___v_i_base_const.html#ga69a037919b64e1e3e0f2b949b2b6af2c">VirtualInstrument.SAMPLE_INTERVAL</a></div><div class="ttdeci">static float SAMPLE_INTERVAL</div><div class="ttdoc">The number of seconds between waveform samples. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00034">VirtualInstrument.cs:34</a></div></div>
<div class="ttc" id="group___v_i_base_pub_func_html_gacddf07c08c3a8154a6934be22f539788"><div class="ttname"><a href="group___v_i_base_pub_func.html#gacddf07c08c3a8154a6934be22f539788">VirtualInstrument.GetBuiltInDynamicsThresholdIndex</a></div><div class="ttdeci">int GetBuiltInDynamicsThresholdIndex(int aVelocity)</div><div class="ttdoc">Gets the index for which sound file to use for a pitch at a given velocity. </div><div class="ttdef"><b>Definition:</b> <a href="_virtual_instrument_8cs_source.html#l00098">VirtualInstrument.cs:98</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 30 2017 20:19:53 for VR Piano Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
